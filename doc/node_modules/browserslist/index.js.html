<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/browserslist/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> jsReleases = <span class="hljs-built_in">require</span>(<span class="hljs-string">'node-releases/data/processed/envs.json'</span>)
<span class="hljs-keyword">var</span> agents = <span class="hljs-built_in">require</span>(<span class="hljs-string">'caniuse-lite/dist/unpacker/agents'</span>).agents
<span class="hljs-keyword">var</span> jsEOL = <span class="hljs-built_in">require</span>(<span class="hljs-string">'node-releases/data/release-schedule/release-schedule.json'</span>)
<span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)
<span class="hljs-keyword">var</span> e2c = <span class="hljs-built_in">require</span>(<span class="hljs-string">'electron-to-chromium/versions'</span>)

<span class="hljs-keyword">var</span> BrowserslistError = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./error'</span>)
<span class="hljs-keyword">var</span> env = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./node'</span>) <span class="hljs-comment">// Will load browser.js in webpack</span>

<span class="hljs-keyword">var</span> YEAR = <span class="hljs-number">365.259641</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>
<span class="hljs-keyword">var</span> ANDROID_EVERGREEN_FIRST = <span class="hljs-number">37</span>

<span class="hljs-keyword">var</span> QUERY_OR = <span class="hljs-number">1</span>
<span class="hljs-keyword">var</span> QUERY_AND = <span class="hljs-number">2</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isVersionsMatch</span> (<span class="hljs-params">versionA, versionB</span>) </span>{
  <span class="hljs-keyword">return</span> (versionA + <span class="hljs-string">'.'</span>).indexOf(versionB + <span class="hljs-string">'.'</span>) === <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEolReleased</span> (<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">var</span> version = name.slice(<span class="hljs-number">1</span>)
  <span class="hljs-keyword">return</span> jsReleases.some(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
    <span class="hljs-keyword">return</span> isVersionsMatch(i.version, version)
  })
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalize</span> (<span class="hljs-params">versions</span>) </span>{
  <span class="hljs-keyword">return</span> versions.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">version</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> version === <span class="hljs-string">'string'</span>
  })
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeElectron</span> (<span class="hljs-params">version</span>) </span>{
  <span class="hljs-keyword">var</span> versionToUse = version
  <span class="hljs-keyword">if</span> (version.split(<span class="hljs-string">'.'</span>).length === <span class="hljs-number">3</span>) {
    versionToUse = version
      .split(<span class="hljs-string">'.'</span>)
      .slice(<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>)
      .join(<span class="hljs-string">'.'</span>)
  }
  <span class="hljs-keyword">return</span> versionToUse
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nameMapper</span> (<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapName</span> (<span class="hljs-params">version</span>) </span>{
    <span class="hljs-keyword">return</span> name + <span class="hljs-string">' '</span> + version
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMajor</span> (<span class="hljs-params">version</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(version.split(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>])
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMajorVersions</span> (<span class="hljs-params">released, number</span>) </span>{
  <span class="hljs-keyword">if</span> (released.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> []
  <span class="hljs-keyword">var</span> majorVersions = uniq(released.map(getMajor))
  <span class="hljs-keyword">var</span> minimum = majorVersions[majorVersions.length - number]
  <span class="hljs-keyword">if</span> (!minimum) {
    <span class="hljs-keyword">return</span> released
  }
  <span class="hljs-keyword">var</span> selected = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = released.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">if</span> (minimum &gt; getMajor(released[i])) <span class="hljs-keyword">break</span>
    selected.unshift(released[i])
  }
  <span class="hljs-keyword">return</span> selected
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uniq</span> (<span class="hljs-params">array</span>) </span>{
  <span class="hljs-keyword">var</span> filtered = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++) {
    <span class="hljs-keyword">if</span> (filtered.indexOf(array[i]) === <span class="hljs-number">-1</span>) filtered.push(array[i])
  }
  <span class="hljs-keyword">return</span> filtered
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Helpers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fillUsage</span> (<span class="hljs-params">result, name, data</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> data) {
    result[name + <span class="hljs-string">' '</span> + i] = data[i]
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateFilter</span> (<span class="hljs-params">sign, version</span>) </span>{
  version = <span class="hljs-built_in">parseFloat</span>(version)
  <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(v) &gt; version
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;='</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(v) &gt;= version
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(v) &lt; version
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(v) &lt;= version
    }
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateSemverFilter</span> (<span class="hljs-params">sign, version</span>) </span>{
  version = version.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
  version[<span class="hljs-number">1</span>] = version[<span class="hljs-number">1</span>] || <span class="hljs-number">0</span>
  version[<span class="hljs-number">2</span>] = version[<span class="hljs-number">2</span>] || <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      v = v.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
      <span class="hljs-keyword">return</span> compareSemver(v, version) &gt; <span class="hljs-number">0</span>
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;='</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      v = v.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
      <span class="hljs-keyword">return</span> compareSemver(v, version) &gt;= <span class="hljs-number">0</span>
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      v = v.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
      <span class="hljs-keyword">return</span> compareSemver(version, v) &gt; <span class="hljs-number">0</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      v = v.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
      <span class="hljs-keyword">return</span> compareSemver(version, v) &gt;= <span class="hljs-number">0</span>
    }
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseSimpleInt</span> (<span class="hljs-params">x</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(x)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">if</span> (a &lt; b) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
  <span class="hljs-keyword">if</span> (a &gt; b) <span class="hljs-keyword">return</span> +<span class="hljs-number">1</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareSemver</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> (
    compare(<span class="hljs-built_in">parseInt</span>(a[<span class="hljs-number">0</span>]), <span class="hljs-built_in">parseInt</span>(b[<span class="hljs-number">0</span>])) ||
    compare(<span class="hljs-built_in">parseInt</span>(a[<span class="hljs-number">1</span>] || <span class="hljs-string">'0'</span>), <span class="hljs-built_in">parseInt</span>(b[<span class="hljs-number">1</span>] || <span class="hljs-string">'0'</span>)) ||
    compare(<span class="hljs-built_in">parseInt</span>(a[<span class="hljs-number">2</span>] || <span class="hljs-string">'0'</span>), <span class="hljs-built_in">parseInt</span>(b[<span class="hljs-number">2</span>] || <span class="hljs-string">'0'</span>))
  )
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>this follows the npm-like semver behavior</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">semverFilterLoose</span> (<span class="hljs-params">operator, range</span>) </span>{
  range = range.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> range[<span class="hljs-number">1</span>] === <span class="hljs-string">'undefined'</span>) {
    range[<span class="hljs-number">1</span>] = <span class="hljs-string">'x'</span>
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>ignore any patch version because we only return minor versions
range[2] = 'x'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">switch</span> (operator) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;='</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">version</span>) </span>{
        version = version.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
        <span class="hljs-keyword">return</span> compareSemverLoose(version, range) &lt;= <span class="hljs-number">0</span>
      }
    <span class="hljs-attr">default</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;='</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">version</span>) </span>{
        version = version.split(<span class="hljs-string">'.'</span>).map(parseSimpleInt)
        <span class="hljs-keyword">return</span> compareSemverLoose(version, range) &gt;= <span class="hljs-number">0</span>
      }
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>this follows the npm-like semver behavior</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareSemverLoose</span> (<span class="hljs-params">version, range</span>) </span>{
  <span class="hljs-keyword">if</span> (version[<span class="hljs-number">0</span>] !== range[<span class="hljs-number">0</span>]) {
    <span class="hljs-keyword">return</span> version[<span class="hljs-number">0</span>] &lt; range[<span class="hljs-number">0</span>] ? <span class="hljs-number">-1</span> : +<span class="hljs-number">1</span>
  }
  <span class="hljs-keyword">if</span> (range[<span class="hljs-number">1</span>] === <span class="hljs-string">'x'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  }
  <span class="hljs-keyword">if</span> (version[<span class="hljs-number">1</span>] !== range[<span class="hljs-number">1</span>]) {
    <span class="hljs-keyword">return</span> version[<span class="hljs-number">1</span>] &lt; range[<span class="hljs-number">1</span>] ? <span class="hljs-number">-1</span> : +<span class="hljs-number">1</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolveVersion</span> (<span class="hljs-params">data, version</span>) </span>{
  <span class="hljs-keyword">if</span> (data.versions.indexOf(version) !== <span class="hljs-number">-1</span>) {
    <span class="hljs-keyword">return</span> version
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (browserslist.versionAliases[data.name][version]) {
    <span class="hljs-keyword">return</span> browserslist.versionAliases[data.name][version]
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeVersion</span> (<span class="hljs-params">data, version</span>) </span>{
  <span class="hljs-keyword">var</span> resolved = resolveVersion(data, version)
  <span class="hljs-keyword">if</span> (resolved) {
    <span class="hljs-keyword">return</span> resolved
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.versions.length === <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> data.versions[<span class="hljs-number">0</span>]
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterByYear</span> (<span class="hljs-params">since, context</span>) </span>{
  since = since / <span class="hljs-number">1000</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(agents).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">selected, name</span>) </span>{
    <span class="hljs-keyword">var</span> data = byName(name, context)
    <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span> selected
    <span class="hljs-keyword">var</span> versions = <span class="hljs-built_in">Object</span>.keys(data.releaseDate).filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> data.releaseDate[v] &gt;= since
    })
    <span class="hljs-keyword">return</span> selected.concat(versions.map(nameMapper(data.name)))
  }, [])
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cloneData</span> (<span class="hljs-params">data</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: data.name,
    <span class="hljs-attr">versions</span>: data.versions,
    <span class="hljs-attr">released</span>: data.released,
    <span class="hljs-attr">releaseDate</span>: data.releaseDate
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapVersions</span> (<span class="hljs-params">data, map</span>) </span>{
  data.versions = data.versions.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
    <span class="hljs-keyword">return</span> map[i] || i
  })
  data.released = data.versions.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
    <span class="hljs-keyword">return</span> map[i] || i
  })
  <span class="hljs-keyword">var</span> fixedDate = { }
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> data.releaseDate) {
    fixedDate[map[i] || i] = data.releaseDate[i]
  }
  data.releaseDate = fixedDate
  <span class="hljs-keyword">return</span> data
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byName</span> (<span class="hljs-params">name, context</span>) </span>{
  name = name.toLowerCase()
  name = browserslist.aliases[name] || name
  <span class="hljs-keyword">if</span> (context.mobileToDesktop &amp;&amp; browserslist.desktopNames[name]) {
    <span class="hljs-keyword">var</span> desktop = browserslist.data[browserslist.desktopNames[name]]
    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'android'</span>) {
      <span class="hljs-keyword">return</span> normalizeAndroidData(cloneData(browserslist.data[name]), desktop)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> cloned = cloneData(desktop)
      cloned.name = name
      <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'op_mob'</span>) {
        cloned = mapVersions(cloned, { <span class="hljs-string">'10.0-10.1'</span>: <span class="hljs-string">'10'</span> })
      }
      <span class="hljs-keyword">return</span> cloned
    }
  }
  <span class="hljs-keyword">return</span> browserslist.data[name]
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeAndroidVersions</span> (<span class="hljs-params">androidVersions, chromeVersions</span>) </span>{
  <span class="hljs-keyword">var</span> firstEvergreen = ANDROID_EVERGREEN_FIRST
  <span class="hljs-keyword">var</span> last = chromeVersions[chromeVersions.length - <span class="hljs-number">1</span>]
  <span class="hljs-keyword">return</span> androidVersions
    .filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">version</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^(?:[2-4]\.|[34]$)/</span>.test(version) })
    .concat(chromeVersions.slice(firstEvergreen - last - <span class="hljs-number">1</span>))
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeAndroidData</span> (<span class="hljs-params">android, chrome</span>) </span>{
  android.released = normalizeAndroidVersions(android.released, chrome.released)
  android.versions = normalizeAndroidVersions(android.versions, chrome.versions)
  <span class="hljs-keyword">return</span> android
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkName</span> (<span class="hljs-params">name, context</span>) </span>{
  <span class="hljs-keyword">var</span> data = byName(name, context)
  <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(<span class="hljs-string">'Unknown browser '</span> + name)
  <span class="hljs-keyword">return</span> data
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unknownQuery</span> (<span class="hljs-params">query</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> BrowserslistError(
    <span class="hljs-string">'Unknown browser query `'</span> + query + <span class="hljs-string">'`. '</span> +
    <span class="hljs-string">'Maybe you are using old Browserslist or made typo in query.'</span>
  )
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterAndroid</span> (<span class="hljs-params">list, versions, context</span>) </span>{
  <span class="hljs-keyword">if</span> (context.mobileToDesktop) <span class="hljs-keyword">return</span> list
  <span class="hljs-keyword">var</span> released = browserslist.data.android.released
  <span class="hljs-keyword">var</span> last = released[released.length - <span class="hljs-number">1</span>]
  <span class="hljs-keyword">var</span> diff = last - ANDROID_EVERGREEN_FIRST - versions
  <span class="hljs-keyword">if</span> (diff &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> list.slice(<span class="hljs-number">-1</span>)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> list.slice(diff - <span class="hljs-number">1</span>)
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>Resolves queries into a browser list.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">queries</span>
<span class="dox_type">string</span>
<span class="dox_type">Array.&lt;string&gt;</span>
<span>Queries to combine. Either an array of queries or a long string of queries.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[context]</span>
<span class="dox_type">object</span>
<span>Optional arguments to the select function in <code>queries</code>.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolve</span> (<span class="hljs-params">queries, context</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(queries)) {
    queries = flatten(queries.map(parse))
  } <span class="hljs-keyword">else</span> {
    queries = parse(queries)
  }

  <span class="hljs-keyword">return</span> queries.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result, query, index</span>) </span>{
    <span class="hljs-keyword">var</span> selection = query.queryString

    <span class="hljs-keyword">var</span> isExclude = selection.indexOf(<span class="hljs-string">'not '</span>) === <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> (isExclude) {
      <span class="hljs-keyword">if</span> (index === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
          <span class="hljs-string">'Write any browsers query (for instance, `defaults`) '</span> +
          <span class="hljs-string">'before `'</span> + selection + <span class="hljs-string">'`'</span>)
      }
      selection = selection.slice(<span class="hljs-number">4</span>)
    }

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; QUERIES.length; i++) {
      <span class="hljs-keyword">var</span> type = QUERIES[i]
      <span class="hljs-keyword">var</span> match = selection.match(type.regexp)
      <span class="hljs-keyword">if</span> (match) {
        <span class="hljs-keyword">var</span> args = [context].concat(match.slice(<span class="hljs-number">1</span>))
        <span class="hljs-keyword">var</span> array = type.select.apply(browserslist, args).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">j</span>) </span>{
          <span class="hljs-keyword">var</span> parts = j.split(<span class="hljs-string">' '</span>)
          <span class="hljs-keyword">if</span> (parts[<span class="hljs-number">1</span>] === <span class="hljs-string">'0'</span>) {
            <span class="hljs-keyword">return</span> parts[<span class="hljs-number">0</span>] + <span class="hljs-string">' '</span> + byName(parts[<span class="hljs-number">0</span>], context).versions[<span class="hljs-number">0</span>]
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> j
          }
        })

        <span class="hljs-keyword">switch</span> (query.type) {
          <span class="hljs-keyword">case</span> QUERY_AND:
            <span class="hljs-keyword">if</span> (isExclude) {
              <span class="hljs-keyword">return</span> result.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">j</span>) </span>{
                <span class="hljs-keyword">return</span> array.indexOf(j) === <span class="hljs-number">-1</span>
              })
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> result.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">j</span>) </span>{
                <span class="hljs-keyword">return</span> array.indexOf(j) !== <span class="hljs-number">-1</span>
              })
            }
          <span class="hljs-keyword">case</span> QUERY_OR:
          <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">if</span> (isExclude) {
              <span class="hljs-keyword">var</span> filter = { }
              array.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">j</span>) </span>{
                filter[j] = <span class="hljs-literal">true</span>
              })
              <span class="hljs-keyword">return</span> result.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">j</span>) </span>{
                <span class="hljs-keyword">return</span> !filter[j]
              })
            }
            <span class="hljs-keyword">return</span> result.concat(array)
        }
      }
    }

    <span class="hljs-keyword">throw</span> unknownQuery(selection)
  }, [])
}

<span class="hljs-keyword">var</span> cache = { }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>Return array of browsers by selection queries.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[queries=browserslist.defaults]</span>
<span class="dox_type">string</span>
<span class="dox_type">Array.&lt;string&gt;</span>
<span>Browser queries.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts]</span>
<span class="dox_type">object</span>
<span>Options.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts.path=&#34;.&#34;]</span>
<span class="dox_type">string</span>
<span>Path to processed file.                                 It will be used to find config files.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts.env=&#34;production&#34;]</span>
<span class="dox_type">string</span>
<span>Processing environment.                                         It will be used to take right
queries from config file.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts.config]</span>
<span class="dox_type">string</span>
<span>Path to config file with queries.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts.stats]</span>
<span class="dox_type">object</span>
<span>Custom browser usage statistics                              for &quot;&gt; 1% in my stats&quot; query.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts.ignoreUnknownVersions=false]</span>
<span class="dox_type">boolean</span>
<span>Do not throw on unknown                                                     version in direct query.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts.dangerousExtend]</span>
<span class="dox_type">boolean</span>
<span>Disable security checks                                         for extend query.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[opts.mobileToDesktop]</span>
<span class="dox_type">boolean</span>
<span>Alias mobile browsers to the desktop                                         version when Can I Use doesn't have
data about the specified version.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">browserslist</span> (<span class="hljs-params">queries, opts</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts === <span class="hljs-string">'undefined'</span>) opts = { }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> opts.path === <span class="hljs-string">'undefined'</span>) {
    opts.path = path.resolve ? path.resolve(<span class="hljs-string">'.'</span>) : <span class="hljs-string">'.'</span>
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> queries === <span class="hljs-string">'undefined'</span> || queries === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">var</span> config = browserslist.loadConfig(opts)
    <span class="hljs-keyword">if</span> (config) {
      queries = config
    } <span class="hljs-keyword">else</span> {
      queries = browserslist.defaults
    }
  }

  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">typeof</span> queries === <span class="hljs-string">'string'</span> || <span class="hljs-built_in">Array</span>.isArray(queries))) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
      <span class="hljs-string">'Browser queries must be an array or string. Got '</span> + <span class="hljs-keyword">typeof</span> queries + <span class="hljs-string">'.'</span>)
  }

  <span class="hljs-keyword">var</span> context = {
    <span class="hljs-attr">ignoreUnknownVersions</span>: opts.ignoreUnknownVersions,
    <span class="hljs-attr">dangerousExtend</span>: opts.dangerousExtend,
    <span class="hljs-attr">mobileToDesktop</span>: opts.mobileToDesktop,
    <span class="hljs-attr">env</span>: opts.env
  }

  env.oldDataWarning(browserslist.data)
  <span class="hljs-keyword">var</span> stats = env.getStat(opts, browserslist.data)
  <span class="hljs-keyword">if</span> (stats) {
    context.customUsage = { }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> browser <span class="hljs-keyword">in</span> stats) {
      fillUsage(context.customUsage, browser, stats[browser])
    }
  }

  <span class="hljs-keyword">var</span> cacheKey = <span class="hljs-built_in">JSON</span>.stringify([queries, context])
  <span class="hljs-keyword">if</span> (cache[cacheKey]) <span class="hljs-keyword">return</span> cache[cacheKey]

  <span class="hljs-keyword">var</span> result = uniq(resolve(queries, context)).sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name1, name2</span>) </span>{
    name1 = name1.split(<span class="hljs-string">' '</span>)
    name2 = name2.split(<span class="hljs-string">' '</span>)
    <span class="hljs-keyword">if</span> (name1[<span class="hljs-number">0</span>] === name2[<span class="hljs-number">0</span>]) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>assumptions on caniuse data</p>
<ol>
<li>version ranges never overlaps</li>
<li>if version is not a range, it never contains <code>-</code></li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> version1 = name1[<span class="hljs-number">1</span>].split(<span class="hljs-string">'-'</span>)[<span class="hljs-number">0</span>]
      <span class="hljs-keyword">var</span> version2 = name2[<span class="hljs-number">1</span>].split(<span class="hljs-string">'-'</span>)[<span class="hljs-number">0</span>]
      <span class="hljs-keyword">return</span> compareSemver(version2.split(<span class="hljs-string">'.'</span>), version1.split(<span class="hljs-string">'.'</span>))
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> compare(name1[<span class="hljs-number">0</span>], name2[<span class="hljs-number">0</span>])
    }
  })
  <span class="hljs-keyword">if</span> (!process.env.BROWSERSLIST_DISABLE_CACHE) {
    cache[cacheKey] = result
  }
  <span class="hljs-keyword">return</span> result
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse</span> (<span class="hljs-params">queries</span>) </span>{
  <span class="hljs-keyword">var</span> qs = []
  <span class="hljs-keyword">do</span> {
    queries = doMatch(queries, qs)
  } <span class="hljs-keyword">while</span> (queries)
  <span class="hljs-keyword">return</span> qs
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doMatch</span> (<span class="hljs-params">string, qs</span>) </span>{
  <span class="hljs-keyword">var</span> or = <span class="hljs-regexp">/^(?:,\s*|\s+or\s+)(.*)/i</span>
  <span class="hljs-keyword">var</span> and = <span class="hljs-regexp">/^\s+and\s+(.*)/i</span>

  <span class="hljs-keyword">return</span> find(string, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">parsed, n, max</span>) </span>{
    <span class="hljs-keyword">if</span> (and.test(parsed)) {
      qs.unshift({ <span class="hljs-attr">type</span>: QUERY_AND, <span class="hljs-attr">queryString</span>: parsed.match(and)[<span class="hljs-number">1</span>] })
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (or.test(parsed)) {
      qs.unshift({ <span class="hljs-attr">type</span>: QUERY_OR, <span class="hljs-attr">queryString</span>: parsed.match(or)[<span class="hljs-number">1</span>] })
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (n === max) {
      qs.unshift({ <span class="hljs-attr">type</span>: QUERY_OR, <span class="hljs-attr">queryString</span>: parsed.trim() })
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  })
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">find</span> (<span class="hljs-params">string, predicate</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">1</span>, max = string.length; n &lt;= max; n++) {
    <span class="hljs-keyword">var</span> parsed = string.substr(-n, n)
    <span class="hljs-keyword">if</span> (predicate(parsed, n, max)) {
      <span class="hljs-keyword">return</span> string.slice(<span class="hljs-number">0</span>, -n)
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flatten</span> (<span class="hljs-params">array</span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Array</span>.isArray(array)) <span class="hljs-keyword">return</span> [array]
  <span class="hljs-keyword">return</span> array.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a.concat(flatten(b))
  }, [])
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>Will be filled by Can I Use data below</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">browserslist.cache = { }
browserslist.data = { }
browserslist.usage = {
  <span class="hljs-attr">global</span>: { },
  <span class="hljs-attr">custom</span>: <span class="hljs-literal">null</span>
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>Default browsers query</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">browserslist.defaults = [
  <span class="hljs-string">'&gt; 0.5%'</span>,
  <span class="hljs-string">'last 2 versions'</span>,
  <span class="hljs-string">'Firefox ESR'</span>,
  <span class="hljs-string">'not dead'</span>
]

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>Browser names aliases</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">browserslist.aliases = {
  <span class="hljs-attr">fx</span>: <span class="hljs-string">'firefox'</span>,
  <span class="hljs-attr">ff</span>: <span class="hljs-string">'firefox'</span>,
  <span class="hljs-attr">ios</span>: <span class="hljs-string">'ios_saf'</span>,
  <span class="hljs-attr">explorer</span>: <span class="hljs-string">'ie'</span>,
  <span class="hljs-attr">blackberry</span>: <span class="hljs-string">'bb'</span>,
  <span class="hljs-attr">explorermobile</span>: <span class="hljs-string">'ie_mob'</span>,
  <span class="hljs-attr">operamini</span>: <span class="hljs-string">'op_mini'</span>,
  <span class="hljs-attr">operamobile</span>: <span class="hljs-string">'op_mob'</span>,
  <span class="hljs-attr">chromeandroid</span>: <span class="hljs-string">'and_chr'</span>,
  <span class="hljs-attr">firefoxandroid</span>: <span class="hljs-string">'and_ff'</span>,
  <span class="hljs-attr">ucandroid</span>: <span class="hljs-string">'and_uc'</span>,
  <span class="hljs-attr">qqandroid</span>: <span class="hljs-string">'and_qq'</span>
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>Can I Use only provides a few versions for some browsers (e.g. and_chr).
Fallback to a similar browser for unknown versions</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">browserslist.desktopNames = {
  <span class="hljs-attr">and_chr</span>: <span class="hljs-string">'chrome'</span>,
  <span class="hljs-attr">and_ff</span>: <span class="hljs-string">'firefox'</span>,
  <span class="hljs-attr">ie_mob</span>: <span class="hljs-string">'ie'</span>,
  <span class="hljs-attr">op_mob</span>: <span class="hljs-string">'opera'</span>,
  <span class="hljs-attr">android</span>: <span class="hljs-string">'chrome'</span> <span class="hljs-comment">// has extra processing logic</span>
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>Aliases to work with joined versions like <code>ios_saf 7.0-7.1</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">browserslist.versionAliases = { }

browserslist.clearCaches = env.clearCaches
browserslist.parseConfig = env.parseConfig
browserslist.readConfig = env.readConfig
browserslist.findConfig = env.findConfig
browserslist.loadConfig = env.loadConfig

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>Return browsers market coverage.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">browsers</span>
<span class="dox_type">Array.&lt;string&gt;</span>
<span>Browsers names in Can I Use.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[stats=&#34;global&#34;]</span>
<span class="dox_type">string</span>
<span class="dox_type">object</span>
<span>Which statistics should be used.                                         Country code or custom statistics.
Pass <code>&quot;my stats&quot;</code> to load statistics
from Browserslist files.
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">number</span>
<span>Total market coverage for all selected browsers.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">browserslist.coverage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">browsers, stats</span>) </span>{
  <span class="hljs-keyword">var</span> data
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> stats === <span class="hljs-string">'undefined'</span>) {
    data = browserslist.usage.global
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (stats === <span class="hljs-string">'my stats'</span>) {
    <span class="hljs-keyword">var</span> opts = {}
    opts.path = path.resolve ? path.resolve(<span class="hljs-string">'.'</span>) : <span class="hljs-string">'.'</span>
    <span class="hljs-keyword">var</span> customStats = env.getStat(opts)
    <span class="hljs-keyword">if</span> (!customStats) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(<span class="hljs-string">'Custom usage statistics was not provided'</span>)
    }
    data = {}
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> browser <span class="hljs-keyword">in</span> customStats) {
      fillUsage(data, browser, customStats[browser])
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> stats === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">if</span> (stats.length &gt; <span class="hljs-number">2</span>) {
      stats = stats.toLowerCase()
    } <span class="hljs-keyword">else</span> {
      stats = stats.toUpperCase()
    }
    env.loadCountry(browserslist.usage, stats, browserslist.data)
    data = browserslist.usage[stats]
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'dataByBrowser'</span> <span class="hljs-keyword">in</span> stats) {
      stats = stats.dataByBrowser
    }
    data = { }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> stats) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> version <span class="hljs-keyword">in</span> stats[name]) {
        data[name + <span class="hljs-string">' '</span> + version] = stats[name][version]
      }
    }
  }

  <span class="hljs-keyword">return</span> browsers.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">all, i</span>) </span>{
    <span class="hljs-keyword">var</span> usage = data[i]
    <span class="hljs-keyword">if</span> (usage === <span class="hljs-literal">undefined</span>) {
      usage = data[i.replace(<span class="hljs-regexp">/ \S+$/</span>, <span class="hljs-string">' 0'</span>)]
    }
    <span class="hljs-keyword">return</span> all + (usage || <span class="hljs-number">0</span>)
  }, <span class="hljs-number">0</span>)
}

<span class="hljs-keyword">var</span> QUERIES = [
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^last\s+(\d+)\s+major\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, versions</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(agents).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">selected, name</span>) </span>{
        <span class="hljs-keyword">var</span> data = byName(name, context)
        <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span> selected
        <span class="hljs-keyword">var</span> list = getMajorVersions(data.released, versions)
        list = list.map(nameMapper(data.name))
        <span class="hljs-keyword">if</span> (data.name === <span class="hljs-string">'android'</span>) {
          list = filterAndroid(list, versions, context)
        }
        <span class="hljs-keyword">return</span> selected.concat(list)
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^last\s+(\d+)\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, versions</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(agents).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">selected, name</span>) </span>{
        <span class="hljs-keyword">var</span> data = byName(name, context)
        <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span> selected
        <span class="hljs-keyword">var</span> list = data.released.slice(-versions)
        list = list.map(nameMapper(data.name))
        <span class="hljs-keyword">if</span> (data.name === <span class="hljs-string">'android'</span>) {
          list = filterAndroid(list, versions, context)
        }
        <span class="hljs-keyword">return</span> selected.concat(list)
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^last\s+(\d+)\s+electron\s+major\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, versions</span>) </span>{
      <span class="hljs-keyword">var</span> validVersions = getMajorVersions(<span class="hljs-built_in">Object</span>.keys(e2c), versions)
      <span class="hljs-keyword">return</span> validVersions.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'chrome '</span> + e2c[i]
      })
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^last\s+(\d+)\s+(\w+)\s+major\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, versions, name</span>) </span>{
      <span class="hljs-keyword">var</span> data = checkName(name, context)
      <span class="hljs-keyword">var</span> validVersions = getMajorVersions(data.released, versions)
      <span class="hljs-keyword">var</span> list = validVersions.map(nameMapper(data.name))
      <span class="hljs-keyword">if</span> (data.name === <span class="hljs-string">'android'</span>) {
        list = filterAndroid(list, versions, context)
      }
      <span class="hljs-keyword">return</span> list
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^last\s+(\d+)\s+electron\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, versions</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(e2c).slice(-versions).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'chrome '</span> + e2c[i]
      })
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^last\s+(\d+)\s+(\w+)\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, versions, name</span>) </span>{
      <span class="hljs-keyword">var</span> data = checkName(name, context)
      <span class="hljs-keyword">var</span> list = data.released.slice(-versions).map(nameMapper(data.name))
      <span class="hljs-keyword">if</span> (data.name === <span class="hljs-string">'android'</span>) {
        list = filterAndroid(list, versions, context)
      }
      <span class="hljs-keyword">return</span> list
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^unreleased\s+versions$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(agents).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">selected, name</span>) </span>{
        <span class="hljs-keyword">var</span> data = byName(name, context)
        <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">return</span> selected
        <span class="hljs-keyword">var</span> list = data.versions.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
          <span class="hljs-keyword">return</span> data.released.indexOf(v) === <span class="hljs-number">-1</span>
        })
        list = list.map(nameMapper(data.name))
        <span class="hljs-keyword">return</span> selected.concat(list)
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^unreleased\s+electron\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> []
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^unreleased\s+(\w+)\s+versions?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, name</span>) </span>{
      <span class="hljs-keyword">var</span> data = checkName(name, context)
      <span class="hljs-keyword">return</span> data.versions.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">return</span> data.released.indexOf(v) === <span class="hljs-number">-1</span>
      }).map(nameMapper(data.name))
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^last\s+(\d*.?\d+)\s+years?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, years</span>) </span>{
      <span class="hljs-keyword">return</span> filterByYear(<span class="hljs-built_in">Date</span>.now() - YEAR * years, context)
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^since (\d+)(?:-(\d+))?(?:-(\d+))?$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, year, month, date</span>) </span>{
      year = <span class="hljs-built_in">parseInt</span>(year)
      month = <span class="hljs-built_in">parseInt</span>(month || <span class="hljs-string">'01'</span>) - <span class="hljs-number">1</span>
      date = <span class="hljs-built_in">parseInt</span>(date || <span class="hljs-string">'01'</span>)
      <span class="hljs-keyword">return</span> filterByYear(<span class="hljs-built_in">Date</span>.UTC(year, month, date, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), context)
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(&gt;=?|&lt;=?)\s*(\d*\.?\d+)%$/</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, sign, popularity</span>) </span>{
      popularity = <span class="hljs-built_in">parseFloat</span>(popularity)
      <span class="hljs-keyword">var</span> usage = browserslist.usage.global
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(usage).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result, version</span>) </span>{
        <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &gt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;='</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt;= popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usage[version] &gt;= popularity) {
          result.push(version)
        }
        <span class="hljs-keyword">return</span> result
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(&gt;=?|&lt;=?)\s*(\d*\.?\d+)%\s+in\s+my\s+stats$/</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, sign, popularity</span>) </span>{
      popularity = <span class="hljs-built_in">parseFloat</span>(popularity)
      <span class="hljs-keyword">if</span> (!context.customUsage) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(<span class="hljs-string">'Custom usage statistics was not provided'</span>)
      }
      <span class="hljs-keyword">var</span> usage = context.customUsage
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(usage).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result, version</span>) </span>{
        <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &gt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;='</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt;= popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usage[version] &gt;= popularity) {
          result.push(version)
        }
        <span class="hljs-keyword">return</span> result
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(&gt;=?|&lt;=?)\s*(\d*\.?\d+)%\s+in\s+(\S+)\s+stats$/</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, sign, popularity, name</span>) </span>{
      popularity = <span class="hljs-built_in">parseFloat</span>(popularity)
      <span class="hljs-keyword">var</span> stats = env.loadStat(context, name, browserslist.data)
      <span class="hljs-keyword">if</span> (stats) {
        context.customUsage = { }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> browser <span class="hljs-keyword">in</span> stats) {
          fillUsage(context.customUsage, browser, stats[browser])
        }
      }
      <span class="hljs-keyword">if</span> (!context.customUsage) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(<span class="hljs-string">'Custom usage statistics was not provided'</span>)
      }
      <span class="hljs-keyword">var</span> usage = context.customUsage
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(usage).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result, version</span>) </span>{
        <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &gt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;='</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt;= popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usage[version] &gt;= popularity) {
          result.push(version)
        }
        <span class="hljs-keyword">return</span> result
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(&gt;=?|&lt;=?)\s*(\d*\.?\d+)%\s+in\s+((alt-)?\w\w)$/</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, sign, popularity, place</span>) </span>{
      popularity = <span class="hljs-built_in">parseFloat</span>(popularity)
      <span class="hljs-keyword">if</span> (place.length === <span class="hljs-number">2</span>) {
        place = place.toUpperCase()
      } <span class="hljs-keyword">else</span> {
        place = place.toLowerCase()
      }
      env.loadCountry(browserslist.usage, place, browserslist.data)
      <span class="hljs-keyword">var</span> usage = browserslist.usage[place]
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(usage).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result, version</span>) </span>{
        <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&gt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &gt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;'</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt; popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sign === <span class="hljs-string">'&lt;='</span>) {
          <span class="hljs-keyword">if</span> (usage[version] &lt;= popularity) {
            result.push(version)
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (usage[version] &gt;= popularity) {
          result.push(version)
        }
        <span class="hljs-keyword">return</span> result
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^cover\s+(\d*\.?\d+)%(\s+in\s+(my\s+stats|(alt-)?\w\w))?$/</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, coverage, statMode</span>) </span>{
      coverage = <span class="hljs-built_in">parseFloat</span>(coverage)
      <span class="hljs-keyword">var</span> usage = browserslist.usage.global
      <span class="hljs-keyword">if</span> (statMode) {
        <span class="hljs-keyword">if</span> (statMode.match(<span class="hljs-regexp">/^\s+in\s+my\s+stats$/</span>)) {
          <span class="hljs-keyword">if</span> (!context.customUsage) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
              <span class="hljs-string">'Custom usage statistics was not provided'</span>
            )
          }
          usage = context.customUsage
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> match = statMode.match(<span class="hljs-regexp">/\s+in\s+((alt-)?\w\w)/</span>)
          <span class="hljs-keyword">var</span> place = match[<span class="hljs-number">1</span>]
          <span class="hljs-keyword">if</span> (place.length === <span class="hljs-number">2</span>) {
            place = place.toUpperCase()
          } <span class="hljs-keyword">else</span> {
            place = place.toLowerCase()
          }
          env.loadCountry(browserslist.usage, place, browserslist.data)
          usage = browserslist.usage[place]
        }
      }
      <span class="hljs-keyword">var</span> versions = <span class="hljs-built_in">Object</span>.keys(usage).sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">return</span> usage[b] - usage[a]
      })
      <span class="hljs-keyword">var</span> coveraged = <span class="hljs-number">0</span>
      <span class="hljs-keyword">var</span> result = []
      <span class="hljs-keyword">var</span> version
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt;= versions.length; i++) {
        version = versions[i]
        <span class="hljs-keyword">if</span> (usage[version] === <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>
        coveraged += usage[version]
        result.push(version)
        <span class="hljs-keyword">if</span> (coveraged &gt;= coverage) <span class="hljs-keyword">break</span>
      }
      <span class="hljs-keyword">return</span> result
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^supports\s+([\w-]+)$/</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, feature</span>) </span>{
      env.loadFeature(browserslist.cache, feature)
      <span class="hljs-keyword">var</span> features = browserslist.cache[feature]
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(features).reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result, version</span>) </span>{
        <span class="hljs-keyword">var</span> flags = features[version]
        <span class="hljs-keyword">if</span> (flags.indexOf(<span class="hljs-string">'y'</span>) &gt;= <span class="hljs-number">0</span> || flags.indexOf(<span class="hljs-string">'a'</span>) &gt;= <span class="hljs-number">0</span>) {
          result.push(version)
        }
        <span class="hljs-keyword">return</span> result
      }, [])
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^electron\s+([\d.]+)\s*-\s*([\d.]+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, from, to</span>) </span>{
      <span class="hljs-keyword">var</span> fromToUse = normalizeElectron(<span class="hljs-keyword">from</span>)
      <span class="hljs-keyword">var</span> toToUse = normalizeElectron(to)
      <span class="hljs-keyword">if</span> (!e2c[fromToUse]) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(<span class="hljs-string">'Unknown version '</span> + <span class="hljs-keyword">from</span> + <span class="hljs-string">' of electron'</span>)
      }
      <span class="hljs-keyword">if</span> (!e2c[toToUse]) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(<span class="hljs-string">'Unknown version '</span> + to + <span class="hljs-string">' of electron'</span>)
      }
      <span class="hljs-keyword">from</span> = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-keyword">from</span>)
      to = <span class="hljs-built_in">parseFloat</span>(to)
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(e2c).filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">var</span> parsed = <span class="hljs-built_in">parseFloat</span>(i)
        <span class="hljs-keyword">return</span> parsed &gt;= <span class="hljs-keyword">from</span> &amp;&amp; parsed &lt;= to
      }).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'chrome '</span> + e2c[i]
      })
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^node\s+([\d.]+)\s*-\s*([\d.]+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, from, to</span>) </span>{
      <span class="hljs-keyword">var</span> nodeVersions = jsReleases.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> i.name === <span class="hljs-string">'nodejs'</span>
      }).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> i.version
      })
      <span class="hljs-keyword">var</span> semverRegExp = <span class="hljs-regexp">/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){0,2}$/</span>
      <span class="hljs-keyword">if</span> (!semverRegExp.test(<span class="hljs-keyword">from</span>)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
          <span class="hljs-string">'Unknown version '</span> + <span class="hljs-keyword">from</span> + <span class="hljs-string">' of Node.js'</span>)
      }
      <span class="hljs-keyword">if</span> (!semverRegExp.test(to)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
          <span class="hljs-string">'Unknown version '</span> + to + <span class="hljs-string">' of Node.js'</span>)
      }
      <span class="hljs-keyword">return</span> nodeVersions
        .filter(semverFilterLoose(<span class="hljs-string">'&gt;='</span>, <span class="hljs-keyword">from</span>))
        .filter(semverFilterLoose(<span class="hljs-string">'&lt;='</span>, to))
        .map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
          <span class="hljs-keyword">return</span> <span class="hljs-string">'node '</span> + v
        })
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(\w+)\s+([\d.]+)\s*-\s*([\d.]+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, name, from, to</span>) </span>{
      <span class="hljs-keyword">var</span> data = checkName(name, context)
      <span class="hljs-keyword">from</span> = <span class="hljs-built_in">parseFloat</span>(normalizeVersion(data, <span class="hljs-keyword">from</span>) || <span class="hljs-keyword">from</span>)
      to = <span class="hljs-built_in">parseFloat</span>(normalizeVersion(data, to) || to)
      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter</span> (<span class="hljs-params">v</span>) </span>{
        <span class="hljs-keyword">var</span> parsed = <span class="hljs-built_in">parseFloat</span>(v)
        <span class="hljs-keyword">return</span> parsed &gt;= <span class="hljs-keyword">from</span> &amp;&amp; parsed &lt;= to
      }
      <span class="hljs-keyword">return</span> data.released.filter(filter).map(nameMapper(data.name))
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^electron\s*(&gt;=?|&lt;=?)\s*([\d.]+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, sign, version</span>) </span>{
      <span class="hljs-keyword">var</span> versionToUse = normalizeElectron(version)
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(e2c)
        .filter(generateFilter(sign, versionToUse))
        .map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
          <span class="hljs-keyword">return</span> <span class="hljs-string">'chrome '</span> + e2c[i]
        })
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^node\s*(&gt;=?|&lt;=?)\s*([\d.]+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, sign, version</span>) </span>{
      <span class="hljs-keyword">var</span> nodeVersions = jsReleases.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> i.name === <span class="hljs-string">'nodejs'</span>
      }).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> i.version
      })
      <span class="hljs-keyword">return</span> nodeVersions
        .filter(generateSemverFilter(sign, version))
        .map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
          <span class="hljs-keyword">return</span> <span class="hljs-string">'node '</span> + v
        })
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(\w+)\s*(&gt;=?|&lt;=?)\s*([\d.]+)$/</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, name, sign, version</span>) </span>{
      <span class="hljs-keyword">var</span> data = checkName(name, context)
      <span class="hljs-keyword">var</span> alias = browserslist.versionAliases[data.name][version]
      <span class="hljs-keyword">if</span> (alias) {
        version = alias
      }
      <span class="hljs-keyword">return</span> data.released
        .filter(generateFilter(sign, version))
        .map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
          <span class="hljs-keyword">return</span> data.name + <span class="hljs-string">' '</span> + v
        })
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(firefox|ff|fx)\s+esr$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> [<span class="hljs-string">'firefox 78'</span>]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/(operamini|op_mini)\s+all/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> [<span class="hljs-string">'op_mini all'</span>]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^electron\s+([\d.]+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, version</span>) </span>{
      <span class="hljs-keyword">var</span> versionToUse = normalizeElectron(version)
      <span class="hljs-keyword">var</span> chrome = e2c[versionToUse]
      <span class="hljs-keyword">if</span> (!chrome) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
          <span class="hljs-string">'Unknown version '</span> + version + <span class="hljs-string">' of electron'</span>)
      }
      <span class="hljs-keyword">return</span> [<span class="hljs-string">'chrome '</span> + chrome]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^node\s+(\d+(\.\d+)?(\.\d+)?)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, version</span>) </span>{
      <span class="hljs-keyword">var</span> nodeReleases = jsReleases.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> i.name === <span class="hljs-string">'nodejs'</span>
      })
      <span class="hljs-keyword">var</span> matched = nodeReleases.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
        <span class="hljs-keyword">return</span> isVersionsMatch(i.version, version)
      })
      <span class="hljs-keyword">if</span> (matched.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">if</span> (context.ignoreUnknownVersions) {
          <span class="hljs-keyword">return</span> []
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
            <span class="hljs-string">'Unknown version '</span> + version + <span class="hljs-string">' of Node.js'</span>)
        }
      }
      <span class="hljs-keyword">return</span> [<span class="hljs-string">'node '</span> + matched[matched.length - <span class="hljs-number">1</span>].version]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^current\s+node$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
      <span class="hljs-keyword">return</span> [env.currentNode(resolve, context)]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^maintained\s+node\s+versions$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
      <span class="hljs-keyword">var</span> now = <span class="hljs-built_in">Date</span>.now()
      <span class="hljs-keyword">var</span> queries = <span class="hljs-built_in">Object</span>.keys(jsEOL).filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">return</span> now &lt; <span class="hljs-built_in">Date</span>.parse(jsEOL[key].end) &amp;&amp;
          now &gt; <span class="hljs-built_in">Date</span>.parse(jsEOL[key].start) &amp;&amp;
          isEolReleased(key)
      }).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'node '</span> + key.slice(<span class="hljs-number">1</span>)
      })
      <span class="hljs-keyword">return</span> resolve(queries, context)
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^phantomjs\s+1.9$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> [<span class="hljs-string">'safari 5'</span>]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^phantomjs\s+2.1$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> [<span class="hljs-string">'safari 6'</span>]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(\w+)\s+(tp|[\d.]+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, name, version</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^tp$/i</span>.test(version)) version = <span class="hljs-string">'TP'</span>
      <span class="hljs-keyword">var</span> data = checkName(name, context)
      <span class="hljs-keyword">var</span> alias = normalizeVersion(data, version)
      <span class="hljs-keyword">if</span> (alias) {
        version = alias
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (version.indexOf(<span class="hljs-string">'.'</span>) === <span class="hljs-number">-1</span>) {
          alias = version + <span class="hljs-string">'.0'</span>
        } <span class="hljs-keyword">else</span> {
          alias = version.replace(<span class="hljs-regexp">/\.0$/</span>, <span class="hljs-string">''</span>)
        }
        alias = normalizeVersion(data, alias)
        <span class="hljs-keyword">if</span> (alias) {
          version = alias
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (context.ignoreUnknownVersions) {
          <span class="hljs-keyword">return</span> []
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
            <span class="hljs-string">'Unknown version '</span> + version + <span class="hljs-string">' of '</span> + name)
        }
      }
      <span class="hljs-keyword">return</span> [data.name + <span class="hljs-string">' '</span> + version]
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^extends (.+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, name</span>) </span>{
      <span class="hljs-keyword">return</span> resolve(env.loadQueries(context, name), context)
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^defaults$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
      <span class="hljs-keyword">return</span> resolve(browserslist.defaults, context)
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^dead$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
      <span class="hljs-keyword">var</span> dead = [
        <span class="hljs-string">'ie &lt;= 10'</span>,
        <span class="hljs-string">'ie_mob &lt;= 11'</span>,
        <span class="hljs-string">'bb &lt;= 10'</span>,
        <span class="hljs-string">'op_mob &lt;= 12.1'</span>,
        <span class="hljs-string">'samsung 4'</span>
      ]
      <span class="hljs-keyword">return</span> resolve(dead, context)
    }
  },
  {
    <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^(\w+)$/i</span>,
    <span class="hljs-attr">select</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, name</span>) </span>{
      <span class="hljs-keyword">if</span> (byName(name, context)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BrowserslistError(
          <span class="hljs-string">'Specify versions in Browserslist query for browser '</span> + name)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">throw</span> unknownQuery(name)
      }
    }
  }
];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>Get and convert Can I Use data</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> agents) {
    <span class="hljs-keyword">var</span> browser = agents[name]
    browserslist.data[name] = {
      <span class="hljs-attr">name</span>: name,
      <span class="hljs-attr">versions</span>: normalize(agents[name].versions),
      <span class="hljs-attr">released</span>: normalize(agents[name].versions.slice(<span class="hljs-number">0</span>, <span class="hljs-number">-3</span>)),
      <span class="hljs-attr">releaseDate</span>: agents[name].release_date
    }
    fillUsage(browserslist.usage.global, name, browser.usage_global)

    browserslist.versionAliases[name] = { }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; browser.versions.length; i++) {
      <span class="hljs-keyword">var</span> full = browser.versions[i]
      <span class="hljs-keyword">if</span> (!full) <span class="hljs-keyword">continue</span>

      <span class="hljs-keyword">if</span> (full.indexOf(<span class="hljs-string">'-'</span>) !== <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">var</span> interval = full.split(<span class="hljs-string">'-'</span>)
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; interval.length; j++) {
          browserslist.versionAliases[name][interval[j]] = full
        }
      }
    }
  }

  browserslist.versionAliases.op_mob[<span class="hljs-string">'59'</span>] = <span class="hljs-string">'58'</span>
}())

<span class="hljs-built_in">module</span>.exports = browserslist

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
