<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/case-sensitive-paths-webpack-plugin/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h2">
        <a href="#original-license">Original license:</a>
      </div>

      <div class="heading h2">
        <a href="#the-mit-license-mit-copyright-c-2015-alexandre-kirszenberg-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software">The MIT License (MIT)
Copyright (c) 2015 Alexandre Kirszenberg
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &amp;quot;Software&amp;quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED &amp;quot;AS IS&amp;quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</a>
      </div>

      <div class="heading h2">
        <a href="#this-plugin-license-also-mit">This plugin license, also MIT:</a>
      </div>

      <div class="heading h2">
        <a href="#the-mit-license-mit-copyright-c-2016-michael-pratt-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software">The MIT License (MIT)
Copyright (c) 2016 Michael Pratt
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &amp;quot;Software&amp;quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED &amp;quot;AS IS&amp;quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-comment">/* eslint-disable strict */</span>

<span class="hljs-meta">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<p>This plugin based on https://gist.github.com/Morhaus/333579c2a5b4db644bd5</p>
</div>
<div class="body">
<div class="pilwrap" id="original-license">
  <h2>
    <a href="#original-license" name="original-license" class="pilcrow"></a>
Original license:
  </h2>
</div>
<div class="pilwrap" id="the-mit-license-mit-copyright-c-2015-alexandre-kirszenberg-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software">
  <h2>
    <a href="#the-mit-license-mit-copyright-c-2015-alexandre-kirszenberg-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software" name="the-mit-license-mit-copyright-c-2015-alexandre-kirszenberg-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software" class="pilcrow"></a>
The MIT License (MIT)
Copyright (c) 2015 Alexandre Kirszenberg
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  </h2>
</div>
<p>And it's NPM-ified version: https://github.com/dcousineau/force-case-sensitivity-webpack-plugin
Author Daniel Cousineau indicated MIT license as well but did not include it</p>
<p>The originals did not properly case-sensitize the entire path, however. This plugin resolves that issue.</p>
<div class="pilwrap" id="this-plugin-license-also-mit">
  <h2>
    <a href="#this-plugin-license-also-mit" name="this-plugin-license-also-mit" class="pilcrow"></a>
This plugin license, also MIT:
  </h2>
</div>
<div class="pilwrap" id="the-mit-license-mit-copyright-c-2016-michael-pratt-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software">
  <h2>
    <a href="#the-mit-license-mit-copyright-c-2016-michael-pratt-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software" name="the-mit-license-mit-copyright-c-2016-michael-pratt-permission-is-hereby-granted-free-of-charge-to-any-person-obtaining-a-copy-of-this-software-and-associated-documentation-files-the-software-to-deal-in-the-software-without-restriction-including-without-limitation-the-rights-to-use-copy-modify-merge-publish-distribute-sublicense-andor-sell-copies-of-the-software-and-to-permit-persons-to-whom-the-software-is-furnished-to-do-so-subject-to-the-following-conditions-the-above-copyright-notice-and-this-permission-notice-shall-be-included-in-all-copies-or-substantial-portions-of-the-software.the-software-is-provided-as-is-without-warranty-of-any-kind-express-or-implied-including-but-not-limited-to-the-warranties-of-merchantability-fitness-for-a-particular-purpose-and-noninfringement.in-no-event-shall-the-authors-or-copyright-holders-be-liable-for-any-claim-damages-or-other-liability-whether-in-an-action-of-contract-tort-or-otherwise-arising-from-out-of-or-in-connection-with-the-software-or-the-use-or-other-dealings-in-the-software" class="pilcrow"></a>
The MIT License (MIT)
Copyright (c) 2016 Michael Pratt
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  </h2>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CaseSensitivePathsPlugin</span>(<span class="hljs-params">options</span>) </span>{
  <span class="hljs-keyword">this</span>.options = options || {};
  <span class="hljs-keyword">this</span>.logger = <span class="hljs-keyword">this</span>.options.logger || <span class="hljs-built_in">console</span>;
  <span class="hljs-keyword">this</span>.reset();
}

CaseSensitivePathsPlugin.prototype.reset = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.pathCache = {};
  <span class="hljs-keyword">this</span>.fsOperations = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">this</span>.primed = <span class="hljs-literal">false</span>;
};

CaseSensitivePathsPlugin.prototype.getFilenamesInDir = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dir, callback</span>) </span>{
  <span class="hljs-keyword">const</span> that = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">const</span> fs = <span class="hljs-keyword">this</span>.compiler.inputFileSystem;
  <span class="hljs-keyword">this</span>.fsOperations += <span class="hljs-number">1</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(<span class="hljs-keyword">this</span>.pathCache, dir)) {
    callback(<span class="hljs-keyword">this</span>.pathCache[dir]);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.debug) {
    <span class="hljs-keyword">this</span>.logger.log(<span class="hljs-string">'[CaseSensitivePathsPlugin] Reading directory'</span>, dir);
  }

  fs.readdir(dir, (err, files) =&gt; {
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">if</span> (that.options.debug) {
        <span class="hljs-keyword">this</span>.logger.log(<span class="hljs-string">'[CaseSensitivePathsPlugin] Failed to read directory'</span>, dir, err);
      }
      callback([]);
      <span class="hljs-keyword">return</span>;
    }

    callback(files.map(<span class="hljs-function">(<span class="hljs-params">f</span>) =&gt;</span> f.normalize ? f.normalize(<span class="hljs-string">'NFC'</span>) : f));
  });
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>This function based on code found at http://stackoverflow.com/questions/27367261/check-if-file-exists-case-sensitive
By Patrick McElhaney (No license indicated - Stack Overflow Answer)
This version will return with the real name of any incorrectly-cased portion of the path, null otherwise.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">CaseSensitivePathsPlugin.prototype.fileExistsWithCase = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">filepath, callback</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Split filepath into current filename (or directory name) and parent directory tree.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">const</span> that = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">const</span> dir = path.dirname(filepath);
  <span class="hljs-keyword">const</span> filename = path.basename(filepath);
  <span class="hljs-keyword">const</span> parsedPath = path.parse(dir);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>If we are at the root, or have found a path we already know is good, return.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (parsedPath.dir === parsedPath.root || dir === <span class="hljs-string">'.'</span> || <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(that.pathCache, filepath)) {
    callback();
    <span class="hljs-keyword">return</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>Check all filenames in the current dir against current filename to ensure one of them matches.
Read from the cache if available, from FS if not.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  that.getFilenamesInDir(dir, (filenames) =&gt; {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>If the exact match does not exist, attempt to find the correct filename.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (filenames.indexOf(filename) === <span class="hljs-number">-1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>Fallback value which triggers us to abort.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">let</span> correctFilename = <span class="hljs-string">'!nonexistent'</span>;

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; filenames.length; i += <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">if</span> (filenames[i].toLowerCase() === filename.toLowerCase()) {
          correctFilename = <span class="hljs-string">`\`<span class="hljs-subst">${filenames[i]}</span>\`.`</span>;
          <span class="hljs-keyword">break</span>;
        }
      }
      callback(correctFilename);
      <span class="hljs-keyword">return</span>;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>If exact match exists, recurse through directory tree until root.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    that.fileExistsWithCase(dir, (recurse) =&gt; {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>If found an error elsewhere, return that correct filename
Don't bother caching - we're about to error out anyway.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (!recurse) {
        that.pathCache[dir] = filenames;
      }

      callback(recurse);
    });
  });
};

CaseSensitivePathsPlugin.prototype.primeCache = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.primed) {
    callback();
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">const</span> that = <span class="hljs-keyword">this</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>Prime the cache with the current directory. We have to assume the current casing is correct,
as in certain circumstances people can switch into an incorrectly-cased directory.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">const</span> currentPath = path.resolve();
  that.getFilenamesInDir(currentPath, (files) =&gt; {
    that.pathCache[currentPath] = files;
    that.primed = <span class="hljs-literal">true</span>;
    callback();
  });
};

CaseSensitivePathsPlugin.prototype.apply = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">compiler</span>) </span>{
  <span class="hljs-keyword">this</span>.compiler = compiler;

  <span class="hljs-keyword">const</span> onDone = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.debug) {
      <span class="hljs-keyword">this</span>.logger.log(<span class="hljs-string">'[CaseSensitivePathsPlugin] Total filesystem reads:'</span>, <span class="hljs-keyword">this</span>.fsOperations);
    }

    <span class="hljs-keyword">this</span>.reset();
  };

  <span class="hljs-keyword">const</span> checkFile = <span class="hljs-function">(<span class="hljs-params">pathName, data, done</span>) =&gt;</span> {
    <span class="hljs-keyword">this</span>.fileExistsWithCase(pathName, (realName) =&gt; {
      <span class="hljs-keyword">if</span> (realName) {
        <span class="hljs-keyword">if</span> (realName === <span class="hljs-string">'!nonexistent'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>If file does not exist, let Webpack show a more appropriate error.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">          <span class="hljs-keyword">if</span> (data.createData) done(<span class="hljs-literal">null</span>); <span class="hljs-keyword">else</span> done(<span class="hljs-literal">null</span>, data);
        } <span class="hljs-keyword">else</span> {
          done(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`[CaseSensitivePathsPlugin] \`<span class="hljs-subst">${pathName}</span>\` does not match the corresponding path on disk <span class="hljs-subst">${realName}</span>`</span>));
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.createData) {
        done(<span class="hljs-literal">null</span>);
      } <span class="hljs-keyword">else</span> {
        done(<span class="hljs-literal">null</span>, data);
      }
    });
  };

  <span class="hljs-keyword">const</span> onAfterResolve = <span class="hljs-function">(<span class="hljs-params">data, done</span>) =&gt;</span> {
    <span class="hljs-keyword">this</span>.primeCache(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>Trim ? off, since some loaders add that to the resource they're attemping to load</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">let</span> pathName = (data.createData || data).resource.split(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>];
      pathName = pathName.normalize ? pathName.normalize(<span class="hljs-string">'NFC'</span>) : pathName;

      checkFile(pathName, data, done);
    });
  };

  <span class="hljs-keyword">if</span> (compiler.hooks) {
    compiler.hooks.done.tap(<span class="hljs-string">'CaseSensitivePathsPlugin'</span>, onDone);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.useBeforeEmitHook) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.debug) {
        <span class="hljs-keyword">this</span>.logger.log(<span class="hljs-string">'[CaseSensitivePathsPlugin] Using the hook for before emit.'</span>);
      }
      compiler.hooks.emit.tapAsync(<span class="hljs-string">'CaseSensitivePathsPlugin'</span>, (compilation, callback) =&gt; {
        <span class="hljs-keyword">let</span> resolvedFilesCount = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">const</span> errors = [];
        <span class="hljs-keyword">this</span>.primeCache(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
          compilation.fileDependencies.forEach(<span class="hljs-function">(<span class="hljs-params">filename</span>) =&gt;</span> {
            checkFile(filename, filename, (error) =&gt; {
              resolvedFilesCount += <span class="hljs-number">1</span>;
              <span class="hljs-keyword">if</span> (error) {
                errors.push(error);
              }
              <span class="hljs-keyword">if</span> (resolvedFilesCount === compilation.fileDependencies.size) {
                <span class="hljs-keyword">if</span> (errors.length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>Send all errors to webpack</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                  <span class="hljs-built_in">Array</span>.prototype.push.apply(compilation.errors, errors);
                }
                callback();
              }
            });
          });
        });
      });
    } <span class="hljs-keyword">else</span> {
      compiler.hooks.normalModuleFactory.tap(<span class="hljs-string">'CaseSensitivePathsPlugin'</span>, (nmf) =&gt; {
        nmf.hooks.afterResolve.tapAsync(<span class="hljs-string">'CaseSensitivePathsPlugin'</span>, onAfterResolve);
      });
    }
  } <span class="hljs-keyword">else</span> {
    compiler.plugin(<span class="hljs-string">'done'</span>, onDone);
    compiler.plugin(<span class="hljs-string">'normal-module-factory'</span>, (nmf) =&gt; {
      nmf.plugin(<span class="hljs-string">'after-resolve'</span>, onAfterResolve);
    });
  }
};

<span class="hljs-built_in">module</span>.exports = CaseSensitivePathsPlugin;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
