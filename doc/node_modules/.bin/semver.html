<!DOCTYPE html>
<html>
<head>
  <title>semver</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/.bin/semver";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>semver</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Standalone semver comparison program.
Exits successfully and prints matching version(s) if
any supplied version is valid and passes all tests.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> argv = process.argv.slice(<span class="hljs-number">2</span>)

<span class="hljs-keyword">var</span> versions = []

<span class="hljs-keyword">var</span> range = []

<span class="hljs-keyword">var</span> inc = <span class="hljs-literal">null</span>

<span class="hljs-keyword">var</span> version = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../package.json'</span>).version

<span class="hljs-keyword">var</span> loose = <span class="hljs-literal">false</span>

<span class="hljs-keyword">var</span> includePrerelease = <span class="hljs-literal">false</span>

<span class="hljs-keyword">var</span> coerce = <span class="hljs-literal">false</span>

<span class="hljs-keyword">var</span> rtl = <span class="hljs-literal">false</span>

<span class="hljs-keyword">var</span> identifier

<span class="hljs-keyword">var</span> semver = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../semver'</span>)

<span class="hljs-keyword">var</span> reverse = <span class="hljs-literal">false</span>

<span class="hljs-keyword">var</span> options = {}

main()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (!argv.length) <span class="hljs-keyword">return</span> help()
  <span class="hljs-keyword">while</span> (argv.length) {
    <span class="hljs-keyword">var</span> a = argv.shift()
    <span class="hljs-keyword">var</span> indexOfEqualSign = a.indexOf(<span class="hljs-string">'='</span>)
    <span class="hljs-keyword">if</span> (indexOfEqualSign !== <span class="hljs-number">-1</span>) {
      a = a.slice(<span class="hljs-number">0</span>, indexOfEqualSign)
      argv.unshift(a.slice(indexOfEqualSign + <span class="hljs-number">1</span>))
    }
    <span class="hljs-keyword">switch</span> (a) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-rv'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'-rev'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--rev'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--reverse'</span>:
        reverse = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-l'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--loose'</span>:
        loose = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-p'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--include-prerelease'</span>:
        includePrerelease = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-v'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--version'</span>:
        versions.push(argv.shift())
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-i'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--inc'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--increment'</span>:
        <span class="hljs-keyword">switch</span> (argv[<span class="hljs-number">0</span>]) {
          <span class="hljs-keyword">case</span> <span class="hljs-string">'major'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'minor'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'patch'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'prerelease'</span>:
          <span class="hljs-keyword">case</span> <span class="hljs-string">'premajor'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'preminor'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'prepatch'</span>:
            inc = argv.shift()
            <span class="hljs-keyword">break</span>
          <span class="hljs-attr">default</span>:
            inc = <span class="hljs-string">'patch'</span>
            <span class="hljs-keyword">break</span>
        }
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'--preid'</span>:
        identifier = argv.shift()
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-r'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--range'</span>:
        range.push(argv.shift())
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-c'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--coerce'</span>:
        coerce = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'--rtl'</span>:
        rtl = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'--ltr'</span>:
        rtl = <span class="hljs-literal">false</span>
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'-h'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'--help'</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">'-?'</span>:
        <span class="hljs-keyword">return</span> help()
      <span class="hljs-attr">default</span>:
        versions.push(a)
        <span class="hljs-keyword">break</span>
    }
  }

  <span class="hljs-keyword">var</span> options = { <span class="hljs-attr">loose</span>: loose, <span class="hljs-attr">includePrerelease</span>: includePrerelease, <span class="hljs-attr">rtl</span>: rtl }

  versions = versions.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
    <span class="hljs-keyword">return</span> coerce ? (semver.coerce(v, options) || { <span class="hljs-attr">version</span>: v }).version : v
  }).filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
    <span class="hljs-keyword">return</span> semver.valid(v)
  })
  <span class="hljs-keyword">if</span> (!versions.length) <span class="hljs-keyword">return</span> fail()
  <span class="hljs-keyword">if</span> (inc &amp;&amp; (versions.length !== <span class="hljs-number">1</span> || range.length)) { <span class="hljs-keyword">return</span> failInc() }

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = range.length; i &lt; l; i++) {
    versions = versions.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
      <span class="hljs-keyword">return</span> semver.satisfies(v, range[i], options)
    })
    <span class="hljs-keyword">if</span> (!versions.length) <span class="hljs-keyword">return</span> fail()
  }
  <span class="hljs-keyword">return</span> success(versions)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">failInc</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'--inc can only be used on a single version with no range'</span>)
  fail()
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fail</span> (<span class="hljs-params"></span>) </span>{ process.exit(<span class="hljs-number">1</span>) }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">success</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> compare = reverse ? <span class="hljs-string">'rcompare'</span> : <span class="hljs-string">'compare'</span>
  versions.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> semver[compare](a, b, options)
  }).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
    <span class="hljs-keyword">return</span> semver.clean(v, options)
  }).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
    <span class="hljs-keyword">return</span> inc ? semver.inc(v, inc, options, identifier) : v
  }).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v, i, _</span>) </span>{ <span class="hljs-built_in">console</span>.log(v) })
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">help</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log([<span class="hljs-string">'SemVer '</span> + version,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'A JavaScript implementation of the https://semver.org/ specification'</span>,
    <span class="hljs-string">'Copyright Isaac Z. Schlueter'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'Usage: semver [options] &lt;version&gt; [&lt;version&gt; [...]]'</span>,
    <span class="hljs-string">'Prints valid versions sorted by SemVer precedence'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'Options:'</span>,
    <span class="hljs-string">'-r --range &lt;range&gt;'</span>,
    <span class="hljs-string">'        Print versions that match the specified range.'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'-i --increment [&lt;level&gt;]'</span>,
    <span class="hljs-string">'        Increment a version by the specified level.  Level can'</span>,
    <span class="hljs-string">'        be one of: major, minor, patch, premajor, preminor,'</span>,
    <span class="hljs-string">"        prepatch, or prerelease.  Default level is 'patch'."</span>,
    <span class="hljs-string">'        Only one version may be specified.'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'--preid &lt;identifier&gt;'</span>,
    <span class="hljs-string">'        Identifier to be used to prefix premajor, preminor,'</span>,
    <span class="hljs-string">'        prepatch or prerelease version increments.'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'-l --loose'</span>,
    <span class="hljs-string">'        Interpret versions and ranges loosely'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'-p --include-prerelease'</span>,
    <span class="hljs-string">'        Always include prerelease versions in range matching'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'-c --coerce'</span>,
    <span class="hljs-string">'        Coerce a string into SemVer if possible'</span>,
    <span class="hljs-string">'        (does not imply --loose)'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'--rtl'</span>,
    <span class="hljs-string">'        Coerce version strings right to left'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'--ltr'</span>,
    <span class="hljs-string">'        Coerce version strings left to right (default)'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'Program exits successfully if any valid version satisfies'</span>,
    <span class="hljs-string">'all supplied ranges, and prints all satisfying versions.'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'If no satisfying versions are found, then exits failure.'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'Versions are printed in ascending order, so supplying'</span>,
    <span class="hljs-string">'multiple versions to the utility will just sort them.'</span>
  ].join(<span class="hljs-string">'\n'</span>))
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
