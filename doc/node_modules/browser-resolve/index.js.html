<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/browser-resolve/index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<p>builtin</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>vendor</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> resv = <span class="hljs-built_in">require</span>(<span class="hljs-string">'resolve'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>given a path, create an array of node_module paths for it
borrowed from substack/resolve</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nodeModulesPaths</span> (<span class="hljs-params">start, cb</span>) </span>{
    <span class="hljs-keyword">var</span> splitRe = process.platform === <span class="hljs-string">'win32'</span> ? <span class="hljs-regexp">/[\/\\]/</span> : <span class="hljs-regexp">/\/+/</span>;
    <span class="hljs-keyword">var</span> parts = start.split(splitRe);

    <span class="hljs-keyword">var</span> dirs = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = parts.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        <span class="hljs-keyword">if</span> (parts[i] === <span class="hljs-string">'node_modules'</span>) <span class="hljs-keyword">continue</span>;
        <span class="hljs-keyword">var</span> dir = path.join.apply(
            path, parts.slice(<span class="hljs-number">0</span>, i + <span class="hljs-number">1</span>).concat([<span class="hljs-string">'node_modules'</span>])
        );
        <span class="hljs-keyword">if</span> (!parts[<span class="hljs-number">0</span>].match(<span class="hljs-regexp">/([A-Za-z]:)/</span>)) {
            dir = <span class="hljs-string">'/'</span> + dir;
        }
        dirs.push(dir);
    }
    <span class="hljs-keyword">return</span> dirs;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">find_shims_in_package</span>(<span class="hljs-params">pkgJson, cur_path, shims, browser</span>) </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> info = <span class="hljs-built_in">JSON</span>.parse(pkgJson);
    }
    <span class="hljs-keyword">catch</span> (err) {
        err.message = pkgJson + <span class="hljs-string">' : '</span> + err.message
        <span class="hljs-keyword">throw</span> err;
    }

    <span class="hljs-keyword">var</span> replacements = getReplacements(info, browser);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>no replacements, skip shims</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!replacements) {
        <span class="hljs-keyword">return</span>;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>if browser mapping is a string
then it just replaces the main entry point</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> replacements === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">var</span> key = path.resolve(cur_path, info.main || <span class="hljs-string">'index.js'</span>);
        shims[key] = path.resolve(cur_path, replacements);
        <span class="hljs-keyword">return</span>;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-built_in">Object</span>.keys(replacements).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">var</span> val;
        <span class="hljs-keyword">if</span> (replacements[key] === <span class="hljs-literal">false</span>) {
            val = path.normalize(__dirname + <span class="hljs-string">'/empty.js'</span>);
        }
        <span class="hljs-keyword">else</span> {
            val = replacements[key];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>if target is a relative path, then resolve
otherwise we assume target is a module</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (val[<span class="hljs-number">0</span>] === <span class="hljs-string">'.'</span>) {
                val = path.resolve(cur_path, val);
            }
        }

        <span class="hljs-keyword">if</span> (key[<span class="hljs-number">0</span>] === <span class="hljs-string">'/'</span> || key[<span class="hljs-number">0</span>] === <span class="hljs-string">'.'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>if begins with / ../ or ./ then we must resolve to a full path</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            key = path.resolve(cur_path, key);
        }
        shims[key] = val;
    });

    [ <span class="hljs-string">'.js'</span>, <span class="hljs-string">'.json'</span> ].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">ext</span>) </span>{
        <span class="hljs-built_in">Object</span>.keys(shims).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">if</span> (!shims[key + ext]) {
                shims[key + ext] = shims[key];
            }
        });
    });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>paths is mutated
load shims from first package.json file found</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">load_shims</span>(<span class="hljs-params">paths, browser, cb</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>identify if our file should be replaced per the browser field
original filename|id -&gt; replacement</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> shims = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);

    (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">next</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cur_path = paths.shift();
        <span class="hljs-keyword">if</span> (!cur_path) {
            <span class="hljs-keyword">return</span> cb(<span class="hljs-literal">null</span>, shims);
        }

        <span class="hljs-keyword">var</span> pkg_path = path.join(cur_path, <span class="hljs-string">'package.json'</span>);

        fs.readFile(pkg_path, <span class="hljs-string">'utf8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>) </span>{
            <span class="hljs-keyword">if</span> (err) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>ignore paths we can't open
avoids an exists check</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (err.code === <span class="hljs-string">'ENOENT'</span>) {
                    <span class="hljs-keyword">return</span> next();
                }

                <span class="hljs-keyword">return</span> cb(err);
            }
            <span class="hljs-keyword">try</span> {
                find_shims_in_package(data, cur_path, shims, browser);
                <span class="hljs-keyword">return</span> cb(<span class="hljs-literal">null</span>, shims);
            }
            <span class="hljs-keyword">catch</span> (err) {
                <span class="hljs-keyword">return</span> cb(err);
            }
        });
    })();
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>paths is mutated
synchronously load shims from first package.json file found</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">load_shims_sync</span>(<span class="hljs-params">paths, browser</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>identify if our file should be replaced per the browser field
original filename|id -&gt; replacement</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> shims = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
    <span class="hljs-keyword">var</span> cur_path;

    <span class="hljs-keyword">while</span> (cur_path = paths.shift()) {
        <span class="hljs-keyword">var</span> pkg_path = path.join(cur_path, <span class="hljs-string">'package.json'</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> data = fs.readFileSync(pkg_path, <span class="hljs-string">'utf8'</span>);
            find_shims_in_package(data, cur_path, shims, browser);
            <span class="hljs-keyword">return</span> shims;
        }
        <span class="hljs-keyword">catch</span> (err) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>ignore paths we can't open
avoids an exists check</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (err.code === <span class="hljs-string">'ENOENT'</span>) {
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">throw</span> err;
        }
    }
    <span class="hljs-keyword">return</span> shims;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">build_resolve_opts</span>(<span class="hljs-params">opts, base</span>) </span>{
    <span class="hljs-keyword">var</span> packageFilter = opts.packageFilter;
    <span class="hljs-keyword">var</span> browser = normalizeBrowserFieldName(opts.browser)

    opts.basedir = base;
    opts.packageFilter = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">info, pkgdir</span>) </span>{
        <span class="hljs-keyword">if</span> (packageFilter) info = packageFilter(info, pkgdir);

        <span class="hljs-keyword">var</span> replacements = getReplacements(info, browser);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>no browser field, keep info unchanged</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!replacements) {
            <span class="hljs-keyword">return</span> info;
        }

        info[browser] = replacements;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>replace main</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> replacements === <span class="hljs-string">'string'</span>) {
            info.main = replacements;
            <span class="hljs-keyword">return</span> info;
        }

        <span class="hljs-keyword">var</span> replace_main = replacements[info.main || <span class="hljs-string">'./index.js'</span>] ||
            replacements[<span class="hljs-string">'./'</span> + info.main || <span class="hljs-string">'./index.js'</span>];

        info.main = replace_main || info.main;
        <span class="hljs-keyword">return</span> info;
    };

    <span class="hljs-keyword">var</span> pathFilter = opts.pathFilter;
    opts.pathFilter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">info, resvPath, relativePath</span>) </span>{
        <span class="hljs-keyword">if</span> (relativePath[<span class="hljs-number">0</span>] != <span class="hljs-string">'.'</span>) {
            relativePath = <span class="hljs-string">'./'</span> + relativePath;
        }
        <span class="hljs-keyword">var</span> mappedPath;
        <span class="hljs-keyword">if</span> (pathFilter) {
            mappedPath = pathFilter.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        }
        <span class="hljs-keyword">if</span> (mappedPath) {
            <span class="hljs-keyword">return</span> mappedPath;
        }

        <span class="hljs-keyword">var</span> replacements = info[browser];
        <span class="hljs-keyword">if</span> (!replacements) {
            <span class="hljs-keyword">return</span>;
        }

        mappedPath = replacements[relativePath];
        <span class="hljs-keyword">if</span> (!mappedPath &amp;&amp; path.extname(relativePath) === <span class="hljs-string">''</span>) {
            mappedPath = replacements[relativePath + <span class="hljs-string">'.js'</span>];
            <span class="hljs-keyword">if</span> (!mappedPath) {
                mappedPath = replacements[relativePath + <span class="hljs-string">'.json'</span>];
            }
        }
        <span class="hljs-keyword">return</span> mappedPath;
    };

    <span class="hljs-keyword">return</span> opts;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolve</span>(<span class="hljs-params">id, opts, cb</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>opts.filename
opts.paths
opts.modules
opts.packageFilter</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    opts = opts || {};
    opts.filename = opts.filename || <span class="hljs-string">''</span>;

    <span class="hljs-keyword">var</span> base = path.dirname(opts.filename);

    <span class="hljs-keyword">if</span> (opts.basedir) {
        base = opts.basedir;
    }

    <span class="hljs-keyword">var</span> paths = nodeModulesPaths(base);

    <span class="hljs-keyword">if</span> (opts.paths) {
        paths.push.apply(paths, opts.paths);
    }

    paths = paths.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p</span>) </span>{
        <span class="hljs-keyword">return</span> path.dirname(p);
    });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>we must always load shims because the browser field could shim out a module</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    load_shims(paths, opts.browser, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, shims</span>) </span>{
        <span class="hljs-keyword">if</span> (err) {
            <span class="hljs-keyword">return</span> cb(err);
        }

        <span class="hljs-keyword">var</span> resid = path.resolve(opts.basedir || path.dirname(opts.filename), id);
        <span class="hljs-keyword">if</span> (shims[id] || shims[resid]) {
            <span class="hljs-keyword">var</span> xid = shims[id] ? id : resid;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>if the shim was is an absolute path, it was fully resolved</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (shims[xid][<span class="hljs-number">0</span>] === <span class="hljs-string">'/'</span>) {
                <span class="hljs-keyword">return</span> resv(shims[xid], build_resolve_opts(opts, base), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, full, pkg</span>) </span>{
                    cb(<span class="hljs-literal">null</span>, full, pkg);
                });
            }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>module -&gt; alt-module shims</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            id = shims[xid];
        }

        <span class="hljs-keyword">var</span> modules = opts.modules || <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">var</span> shim_path = modules[id];
        <span class="hljs-keyword">if</span> (shim_path) {
            <span class="hljs-keyword">return</span> cb(<span class="hljs-literal">null</span>, shim_path);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>our browser field resolver
if browser field is an object tho?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">var</span> full = resv(id, build_resolve_opts(opts, base), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, full, pkg</span>) </span>{
            <span class="hljs-keyword">if</span> (err) {
                <span class="hljs-keyword">return</span> cb(err);
            }

            <span class="hljs-keyword">var</span> resolved = (shims) ? shims[full] || full : full;
            cb(<span class="hljs-literal">null</span>, resolved, pkg);
        });
    });
};

resolve.sync = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">id, opts</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>opts.filename
opts.paths
opts.modules
opts.packageFilter</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    opts = opts || {};
    opts.filename = opts.filename || <span class="hljs-string">''</span>;

    <span class="hljs-keyword">var</span> base = path.dirname(opts.filename);

    <span class="hljs-keyword">if</span> (opts.basedir) {
        base = opts.basedir;
    }

    <span class="hljs-keyword">var</span> paths = nodeModulesPaths(base);

    <span class="hljs-keyword">if</span> (opts.paths) {
        paths.push.apply(paths, opts.paths);
    }

    paths = paths.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p</span>) </span>{
        <span class="hljs-keyword">return</span> path.dirname(p);
    });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>we must always load shims because the browser field could shim out a module</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> shims = load_shims_sync(paths, opts.browser);
    <span class="hljs-keyword">var</span> resid = path.resolve(opts.basedir || path.dirname(opts.filename), id);

    <span class="hljs-keyword">if</span> (shims[id] || shims[resid]) {
        <span class="hljs-keyword">var</span> xid = shims[id] ? id : resid;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>if the shim was is an absolute path, it was fully resolved</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (shims[xid][<span class="hljs-number">0</span>] === <span class="hljs-string">'/'</span>) {
            <span class="hljs-keyword">return</span> resv.sync(shims[xid], build_resolve_opts(opts, base));
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>module -&gt; alt-module shims</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        id = shims[xid];
    }

    <span class="hljs-keyword">var</span> modules = opts.modules || <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
    <span class="hljs-keyword">var</span> shim_path = modules[id];
    <span class="hljs-keyword">if</span> (shim_path) {
        <span class="hljs-keyword">return</span> shim_path;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>our browser field resolver
if browser field is an object tho?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> full = resv.sync(id, build_resolve_opts(opts, base));

    <span class="hljs-keyword">return</span> (shims) ? shims[full] || full : full;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeBrowserFieldName</span>(<span class="hljs-params">browser</span>) </span>{
    <span class="hljs-keyword">return</span> browser || <span class="hljs-string">'browser'</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getReplacements</span>(<span class="hljs-params">info, browser</span>) </span>{
    browser = normalizeBrowserFieldName(browser);
    <span class="hljs-keyword">var</span> replacements = info[browser] || info.browser;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>support legacy browserify field for easier migration from legacy
many packages used this field historically</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> info.browserify === <span class="hljs-string">'string'</span> &amp;&amp; !replacements) {
        replacements = info.browserify;
    }

    <span class="hljs-keyword">return</span> replacements;
}

<span class="hljs-built_in">module</span>.exports = resolve;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
