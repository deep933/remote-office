<!DOCTYPE html>
<html>
<head>
  <title>test.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/assert/test.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>test.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>
<p>Copyright Joyent, Inc. and other Node contributors.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the
following conditions:</p>
<p>The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> nodeAssert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);
<span class="hljs-keyword">var</span> ourAssert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./'</span>);
<span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys;
<span class="hljs-keyword">if</span> (process.env.TEST_NATIVE === <span class="hljs-literal">true</span>) {
  tests(nodeAssert, <span class="hljs-string">'node assert'</span>);
} <span class="hljs-keyword">else</span> {
  tests(ourAssert, <span class="hljs-string">'our assert'</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeBlock</span>(<span class="hljs-params">f</span>) </span>{
  <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> f.apply(<span class="hljs-keyword">this</span>, args);
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tests</span> (<span class="hljs-params">assert, what</span>) </span>{
    test(<span class="hljs-string">'assert.ok'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(makeBlock(assert, <span class="hljs-literal">false</span>), assert.AssertionError, <span class="hljs-string">'ok(false)'</span>);

      assert.doesNotThrow(makeBlock(assert, <span class="hljs-literal">true</span>), assert.AssertionError, <span class="hljs-string">'ok(true)'</span>);

      assert.doesNotThrow(makeBlock(assert, <span class="hljs-string">'test'</span>, <span class="hljs-string">'ok(\'test\')'</span>));

      assert.throws(makeBlock(assert.ok, <span class="hljs-literal">false</span>),
                    assert.AssertionError, <span class="hljs-string">'ok(false)'</span>);

      assert.doesNotThrow(makeBlock(assert.ok, <span class="hljs-literal">true</span>),
                          assert.AssertionError, <span class="hljs-string">'ok(true)'</span>);

      assert.doesNotThrow(makeBlock(assert.ok, <span class="hljs-string">'test'</span>), <span class="hljs-string">'ok(\'test\')'</span>);
    });

    test(<span class="hljs-string">'assert.equal'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(makeBlock(assert.equal, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>), assert.AssertionError, <span class="hljs-string">'equal'</span>);

      assert.doesNotThrow(makeBlock(assert.equal, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>), <span class="hljs-string">'equal'</span>);

      assert.doesNotThrow(makeBlock(assert.equal, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>), <span class="hljs-string">'equal'</span>);

      assert.doesNotThrow(makeBlock(assert.equal, <span class="hljs-literal">null</span>, <span class="hljs-literal">undefined</span>), <span class="hljs-string">'equal'</span>);

      assert.doesNotThrow(makeBlock(assert.equal, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>), <span class="hljs-string">'equal'</span>);

      assert.doesNotThrow(makeBlock(assert.equal, <span class="hljs-number">2</span>, <span class="hljs-string">'2'</span>), <span class="hljs-string">'equal'</span>);

      assert.doesNotThrow(makeBlock(assert.notEqual, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>), <span class="hljs-string">'notEqual'</span>);

      assert.throws(makeBlock(assert.notEqual, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>),
                    assert.AssertionError, <span class="hljs-string">'notEqual'</span>);
    });

    test(<span class="hljs-string">'assert.strictEqual'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(makeBlock(assert.strictEqual, <span class="hljs-number">2</span>, <span class="hljs-string">'2'</span>),
                    assert.AssertionError, <span class="hljs-string">'strictEqual'</span>);

      assert.throws(makeBlock(assert.strictEqual, <span class="hljs-literal">null</span>, <span class="hljs-literal">undefined</span>),
                    assert.AssertionError, <span class="hljs-string">'strictEqual'</span>);

      assert.doesNotThrow(makeBlock(assert.notStrictEqual, <span class="hljs-number">2</span>, <span class="hljs-string">'2'</span>), <span class="hljs-string">'notStrictEqual'</span>);
    });

    test(<span class="hljs-string">'assert.deepStrictEqual'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(makeBlock(assert.deepStrictEqual, [<span class="hljs-number">2</span>], [<span class="hljs-string">'2'</span>]),
                    assert.AssertionError, <span class="hljs-string">'deepStrictEqual'</span>);

      assert.throws(makeBlock(assert.deepStrictEqual, [<span class="hljs-literal">null</span>], [<span class="hljs-literal">undefined</span>]),
                    assert.AssertionError, <span class="hljs-string">'deepStrictEqual'</span>);

      assert.doesNotThrow(makeBlock(assert.notDeepStrictEqual, [<span class="hljs-number">2</span>], [<span class="hljs-string">'2'</span>]), <span class="hljs-string">'notDeepStrictEqual'</span>);
    });

    test(<span class="hljs-string">'assert.deepEqual - 7.2'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">3</span>, <span class="hljs-number">14</span>),
                          <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">3</span>, <span class="hljs-number">14</span>)), <span class="hljs-string">'deepEqual date'</span>);

      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">3</span>, <span class="hljs-number">14</span>)),
                    assert.AssertionError,
                    <span class="hljs-string">'deepEqual date'</span>);
    });

    test(<span class="hljs-string">'assert.deepEqual - 7.3'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.doesNotThrow(makeBlock(assert.deepEqual, /a/, /a/));
      assert.doesNotThrow(makeBlock(assert.deepEqual, /a/g, /a/g));
      assert.doesNotThrow(makeBlock(assert.deepEqual, /a/i, /a/i));
      assert.doesNotThrow(makeBlock(assert.deepEqual, /a/m, /a/m));
      assert.doesNotThrow(makeBlock(assert.deepEqual, /a/igm, /a/igm));
      assert.throws(makeBlock(assert.deepEqual, /ab/, /a/));
      assert.throws(makeBlock(assert.deepEqual, /a/g, /a/));
      assert.throws(makeBlock(assert.deepEqual, /a/i, /a/));
      assert.throws(makeBlock(assert.deepEqual, /a/m, /a/));
      assert.throws(makeBlock(assert.deepEqual, /a/igm, /a/im));

      <span class="hljs-keyword">var</span> re1 = <span class="hljs-regexp">/a/</span>;
      re1.lastIndex = <span class="hljs-number">3</span>;
      assert.throws(makeBlock(assert.deepEqual, re1, /a/));
    });

    test(<span class="hljs-string">'assert.deepEqual - 7.4'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-number">4</span>, <span class="hljs-string">'4'</span>), <span class="hljs-string">'deepEqual == check'</span>);
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-literal">true</span>, <span class="hljs-number">1</span>), <span class="hljs-string">'deepEqual == check'</span>);
      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-number">4</span>, <span class="hljs-string">'5'</span>),
                assert.AssertionError,
                <span class="hljs-string">'deepEqual == check'</span>);
    });

    test(<span class="hljs-string">'assert.deepEqual - 7.5'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>having the same number of owned properties &amp;&amp; the same set of keys</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      assert.doesNotThrow(makeBlock(assert.deepEqual, {<span class="hljs-attr">a</span>: <span class="hljs-number">4</span>}, {<span class="hljs-attr">a</span>: <span class="hljs-number">4</span>}));
      assert.doesNotThrow(makeBlock(assert.deepEqual, {<span class="hljs-attr">a</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">'2'</span>}, {<span class="hljs-attr">a</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">'2'</span>}));
      assert.doesNotThrow(makeBlock(assert.deepEqual, [<span class="hljs-number">4</span>], [<span class="hljs-string">'4'</span>]));
      assert.throws(makeBlock(assert.deepEqual, {<span class="hljs-attr">a</span>: <span class="hljs-number">4</span>}, {<span class="hljs-attr">a</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">b</span>: <span class="hljs-literal">true</span>}),
                assert.AssertionError);
      assert.doesNotThrow(makeBlock(assert.deepEqual, [<span class="hljs-string">'a'</span>], {<span class="hljs-number">0</span>: <span class="hljs-string">'a'</span>}));
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>(although not necessarily the same order),</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      assert.doesNotThrow(makeBlock(assert.deepEqual, {<span class="hljs-attr">a</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">b</span>: <span class="hljs-string">'1'</span>}, {<span class="hljs-attr">b</span>: <span class="hljs-string">'1'</span>, <span class="hljs-attr">a</span>: <span class="hljs-number">4</span>}));
      <span class="hljs-keyword">var</span> a1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
      <span class="hljs-keyword">var</span> a2 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
      a1.a = <span class="hljs-string">'test'</span>;
      a1.b = <span class="hljs-literal">true</span>;
      a2.b = <span class="hljs-literal">true</span>;
      a2.a = <span class="hljs-string">'test'</span>;
      assert.throws(makeBlock(assert.deepEqual, keys(a1), keys(a2)),
                assert.AssertionError);
      assert.doesNotThrow(makeBlock(assert.deepEqual, a1, a2));
    });

    test(<span class="hljs-string">'assert.deepEqual - ES6 primitives'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-literal">null</span>, {}), assert.AssertionError);
      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-literal">undefined</span>, {}), assert.AssertionError);
      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-string">'a'</span>, [<span class="hljs-string">'a'</span>]), assert.AssertionError);
      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-string">'a'</span>, {<span class="hljs-number">0</span>: <span class="hljs-string">'a'</span>}), assert.AssertionError);
      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-number">1</span>, {}), assert.AssertionError);
      assert.throws(makeBlock(assert.deepEqual, <span class="hljs-literal">true</span>, {}), assert.AssertionError);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> === <span class="hljs-string">'symbol'</span>) {
        assert.throws(makeBlock(assert.deepEqual, <span class="hljs-built_in">Symbol</span>(), {}), assert.AssertionError);
      }
    });

    test(<span class="hljs-string">'assert.deepEqual - object wrappers'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">'a'</span>), [<span class="hljs-string">'a'</span>]));
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">'a'</span>), {<span class="hljs-number">0</span>: <span class="hljs-string">'a'</span>}));
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(<span class="hljs-number">1</span>), {}));
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(<span class="hljs-literal">true</span>), {}));
    });

    test(<span class="hljs-string">'assert.deepEqual - Buffers'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> Buffer([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), <span class="hljs-keyword">new</span> Buffer([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])));
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global.Uint8Array === <span class="hljs-string">'function'</span>) {
        assert.throws(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> Buffer([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])));
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global.Uint16Array === <span class="hljs-string">'function'</span>) {
        assert.doesNotThrow(makeBlock(assert.deepEqual, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint16Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint16Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])));
      }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">thrower</span>(<span class="hljs-params">errorConstructor</span>) </span>{
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> errorConstructor(<span class="hljs-string">'test'</span>);
    }

    test(<span class="hljs-string">'assert - Testing the throwing'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> aethrow = makeBlock(thrower, assert.AssertionError);
      aethrow = makeBlock(thrower, assert.AssertionError);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>the basic calls work</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      assert.throws(makeBlock(thrower, assert.AssertionError),
                    assert.AssertionError, <span class="hljs-string">'message'</span>);
      assert.throws(makeBlock(thrower, assert.AssertionError), assert.AssertionError);
      assert.throws(makeBlock(thrower, assert.AssertionError));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>if not passing an error, catch all.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      assert.throws(makeBlock(thrower, <span class="hljs-built_in">TypeError</span>));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>when passing a type, only catch errors of the appropriate type</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> threw = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">try</span> {
        assert.throws(makeBlock(thrower, <span class="hljs-built_in">TypeError</span>), assert.AssertionError);
      } <span class="hljs-keyword">catch</span> (e) {
        threw = <span class="hljs-literal">true</span>;
        assert.ok(e <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">TypeError</span>, <span class="hljs-string">'type'</span>);
      }
      assert.equal(<span class="hljs-literal">true</span>, threw,
                   <span class="hljs-string">'a.throws with an explicit error is eating extra errors'</span>,
                   assert.AssertionError);
      threw = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>doesNotThrow should pass through all errors</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">try</span> {
        assert.doesNotThrow(makeBlock(thrower, <span class="hljs-built_in">TypeError</span>), assert.AssertionError);
      } <span class="hljs-keyword">catch</span> (e) {
        threw = <span class="hljs-literal">true</span>;
        assert.ok(e <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">TypeError</span>);
      }
      assert.equal(<span class="hljs-literal">true</span>, threw,
                   <span class="hljs-string">'a.doesNotThrow with an explicit error is eating extra errors'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>key difference is that throwing our correct error makes an assertion error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">try</span> {
        assert.doesNotThrow(makeBlock(thrower, <span class="hljs-built_in">TypeError</span>), <span class="hljs-built_in">TypeError</span>);
      } <span class="hljs-keyword">catch</span> (e) {
        threw = <span class="hljs-literal">true</span>;
        assert.ok(e <span class="hljs-keyword">instanceof</span> assert.AssertionError);
      }
      assert.equal(<span class="hljs-literal">true</span>, threw,
                   <span class="hljs-string">'a.doesNotThrow is not catching type matching errors'</span>);
    });

    test(<span class="hljs-string">'assert.ifError'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{assert.ifError(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'test error'</span>))});
      assert.doesNotThrow(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{assert.ifError(<span class="hljs-literal">null</span>)});
      assert.doesNotThrow(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{assert.ifError()});
    });

    test(<span class="hljs-string">'assert - make sure that validating using constructor really works'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> threw = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">try</span> {
        assert.throws(
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
              <span class="hljs-keyword">throw</span> ({});
            },
            <span class="hljs-built_in">Array</span>
        );
      } <span class="hljs-keyword">catch</span> (e) {
        threw = <span class="hljs-literal">true</span>;
      }
      assert.ok(threw, <span class="hljs-string">'wrong constructor validation'</span>);
    });

    test(<span class="hljs-string">'assert -  use a RegExp to validate error message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(makeBlock(thrower, <span class="hljs-built_in">TypeError</span>), /test/);
    });

    test(<span class="hljs-string">'assert - se a fn to validate error object'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      assert.throws(makeBlock(thrower, <span class="hljs-built_in">TypeError</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
        <span class="hljs-keyword">if</span> ((err <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">TypeError</span>) &amp;&amp; <span class="hljs-regexp">/test/</span>.test(err)) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
      });
    });

    test(<span class="hljs-string">'assert - Make sure deepEqual doesn\'t loop forever on circular refs'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> b = {};
      b.b = b;

      <span class="hljs-keyword">var</span> c = {};
      c.b = c;

      <span class="hljs-keyword">var</span> gotError = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">var</span> equal = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">try</span> {
        equal = assert.deepEqual(b, c);
      } <span class="hljs-keyword">catch</span> (e) {
        gotError = <span class="hljs-literal">true</span>;
      }
      assert.ok(gotError || !equal, gotError ? <span class="hljs-string">'got error'</span>: <span class="hljs-string">'are equal'</span>);
    });

    test(<span class="hljs-string">'assert - Ensure reflexivity of deepEqual with `arguments` objects'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> args = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">arguments</span>; })();
        assert.throws(makeBlock(assert.deepEqual, [], args), assert.AssertionError);
        assert.throws(makeBlock(assert.deepEqual, args, []), assert.AssertionError);
    });

    test(<span class="hljs-string">'assert - test assertion message'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testAssertionMessage</span>(<span class="hljs-params">actual, expected</span>) </span>{
        <span class="hljs-keyword">try</span> {
          assert.equal(actual, <span class="hljs-string">''</span>);
        } <span class="hljs-keyword">catch</span> (e) {
          assert.equal(e.toString(),
              [<span class="hljs-string">'AssertionError:'</span>, expected, <span class="hljs-string">'=='</span>, <span class="hljs-string">'\'\''</span>].join(<span class="hljs-string">' '</span>));
        }
      }
      testAssertionMessage(<span class="hljs-literal">undefined</span>, <span class="hljs-string">'undefined'</span>);
      testAssertionMessage(<span class="hljs-literal">null</span>, <span class="hljs-string">'null'</span>);
      testAssertionMessage(<span class="hljs-literal">true</span>, <span class="hljs-string">'true'</span>);
      testAssertionMessage(<span class="hljs-literal">false</span>, <span class="hljs-string">'false'</span>);
      testAssertionMessage(<span class="hljs-number">0</span>, <span class="hljs-string">'0'</span>);
      testAssertionMessage(<span class="hljs-number">100</span>, <span class="hljs-string">'100'</span>);
      testAssertionMessage(<span class="hljs-literal">NaN</span>, <span class="hljs-string">'NaN'</span>);
      testAssertionMessage(<span class="hljs-literal">Infinity</span>, <span class="hljs-string">'Infinity'</span>);
      testAssertionMessage(-<span class="hljs-literal">Infinity</span>, <span class="hljs-string">'-Infinity'</span>);
      testAssertionMessage(<span class="hljs-string">''</span>, <span class="hljs-string">'""'</span>);
      testAssertionMessage(<span class="hljs-string">'foo'</span>, <span class="hljs-string">'\'foo\''</span>);
      testAssertionMessage([], <span class="hljs-string">'[]'</span>);
      testAssertionMessage([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'[ 1, 2, 3 ]'</span>);
      testAssertionMessage(<span class="hljs-keyword">new</span> Buffer([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), <span class="hljs-string">'&lt;Buffer 01 02 03&gt;'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global.Uint8Array === <span class="hljs-string">'function'</span> &amp;&amp; <span class="hljs-built_in">Object</span>.getOwnPropertyNames( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([])).length === <span class="hljs-number">0</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>todo fix util.inspect</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        testAssertionMessage(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), <span class="hljs-string">'{ \'0\': 1, \'1\': 2, \'2\': 3 }'</span>);
      }
      testAssertionMessage(<span class="hljs-regexp">/a/</span>, <span class="hljs-string">'/a/'</span>);
      testAssertionMessage(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>{}, <span class="hljs-string">'[Function: f]'</span>);
      testAssertionMessage({}, <span class="hljs-string">'{}'</span>);
      testAssertionMessage({<span class="hljs-attr">a</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-attr">b</span>: <span class="hljs-literal">null</span>}, <span class="hljs-string">'{ a: undefined, b: null }'</span>);
      testAssertionMessage({<span class="hljs-attr">a</span>: <span class="hljs-literal">NaN</span>, <span class="hljs-attr">b</span>: <span class="hljs-literal">Infinity</span>, <span class="hljs-attr">c</span>: -<span class="hljs-literal">Infinity</span>},
          <span class="hljs-string">'{ a: NaN, b: Infinity, c: -Infinity }'</span>);
    });

    test(<span class="hljs-string">'assert - regressions from node.js testcase'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> threw = <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">try</span> {
        assert.throws(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
          assert.ifError(<span class="hljs-literal">null</span>);
        });
      } <span class="hljs-keyword">catch</span> (e) {
        threw = <span class="hljs-literal">true</span>;
        assert.equal(e.message, <span class="hljs-string">'Missing expected exception..'</span>);
      }
      assert.ok(threw);

      <span class="hljs-keyword">try</span> {
        assert.equal(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
      } <span class="hljs-keyword">catch</span> (e) {
        assert.equal(e.toString().split(<span class="hljs-string">'\n'</span>)[<span class="hljs-number">0</span>], <span class="hljs-string">'AssertionError: 1 == 2'</span>);
      }

      <span class="hljs-keyword">try</span> {
        assert.equal(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">'oh no'</span>);
      } <span class="hljs-keyword">catch</span> (e) {
        assert.equal(e.toString().split(<span class="hljs-string">'\n'</span>)[<span class="hljs-number">0</span>], <span class="hljs-string">'AssertionError: oh no'</span>);
      }
    });
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
