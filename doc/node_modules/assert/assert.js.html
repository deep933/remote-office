<!DOCTYPE html>
<html>
<head>
  <title>assert.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules/assert/assert.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>assert.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js
original notice:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>!
The buffer module from node.js, for the browser.</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">if</span> (a === b) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  }

  <span class="hljs-keyword">var</span> x = a.length;
  <span class="hljs-keyword">var</span> y = b.length;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = <span class="hljs-built_in">Math</span>.min(x, y); i &lt; len; ++i) {
    <span class="hljs-keyword">if</span> (a[i] !== b[i]) {
      x = a[i];
      y = b[i];
      <span class="hljs-keyword">break</span>;
    }
  }

  <span class="hljs-keyword">if</span> (x &lt; y) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
  }
  <span class="hljs-keyword">if</span> (y &lt; x) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBuffer</span>(<span class="hljs-params">b</span>) </span>{
  <span class="hljs-keyword">if</span> (global.Buffer &amp;&amp; <span class="hljs-keyword">typeof</span> global.Buffer.isBuffer === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> global.Buffer.isBuffer(b);
  }
  <span class="hljs-keyword">return</span> !!(b != <span class="hljs-literal">null</span> &amp;&amp; b._isBuffer);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>based on node assert, original notice:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>http://wiki.commonjs.org/wiki/Unit_Testing/1.0</p>
<p>THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!</p>
<p>Originally from narwhal.js (http://narwhaljs.org)
Copyright (c) 2009 Thomas Robinson &lt;280north.com&gt;</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the 'Software'), to
deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
sell copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util/'</span>);
<span class="hljs-keyword">var</span> hasOwn = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;
<span class="hljs-keyword">var</span> pSlice = <span class="hljs-built_in">Array</span>.prototype.slice;
<span class="hljs-keyword">var</span> functionsHaveNames = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{}.name === <span class="hljs-string">'foo'</span>;
}());
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pToString</span> (<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(obj);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isView</span>(<span class="hljs-params">arrbuf</span>) </span>{
  <span class="hljs-keyword">if</span> (isBuffer(arrbuf)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global.ArrayBuffer !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">ArrayBuffer</span>.isView === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">ArrayBuffer</span>.isView(arrbuf);
  }
  <span class="hljs-keyword">if</span> (!arrbuf) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">if</span> (arrbuf <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">DataView</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">if</span> (arrbuf.buffer &amp;&amp; arrbuf.buffer <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<ol>
<li>The assert module provides functions that throw
AssertionError's when particular conditions are not met. The
assert module must conform to the following interface.</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">module</span>.exports = ok;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<ol start="2">
<li>The AssertionError is defined in assert.
new assert.AssertionError({ message: message,
actual: actual,
expected: expected })</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> regex = <span class="hljs-regexp">/\s*function\s+([^\(\s]*)\s*/</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params">func</span>) </span>{
  <span class="hljs-keyword">if</span> (!util.isFunction(func)) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> (functionsHaveNames) {
    <span class="hljs-keyword">return</span> func.name;
  }
  <span class="hljs-keyword">var</span> str = func.toString();
  <span class="hljs-keyword">var</span> match = str.match(regex);
  <span class="hljs-keyword">return</span> match &amp;&amp; match[<span class="hljs-number">1</span>];
}
assert.AssertionError = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AssertionError</span>(<span class="hljs-params">options</span>) </span>{
  <span class="hljs-keyword">this</span>.name = <span class="hljs-string">'AssertionError'</span>;
  <span class="hljs-keyword">this</span>.actual = options.actual;
  <span class="hljs-keyword">this</span>.expected = options.expected;
  <span class="hljs-keyword">this</span>.operator = options.operator;
  <span class="hljs-keyword">if</span> (options.message) {
    <span class="hljs-keyword">this</span>.message = options.message;
    <span class="hljs-keyword">this</span>.generatedMessage = <span class="hljs-literal">false</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>.message = getMessage(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.generatedMessage = <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">var</span> stackStartFunction = options.stackStartFunction || fail;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.captureStackTrace) {
    <span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, stackStartFunction);
  } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>non v8 browsers so we can have a stacktrace</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> err = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>();
    <span class="hljs-keyword">if</span> (err.stack) {
      <span class="hljs-keyword">var</span> out = err.stack;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>try to strip useless frames</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> fn_name = getName(stackStartFunction);
      <span class="hljs-keyword">var</span> idx = out.indexOf(<span class="hljs-string">'\n'</span> + fn_name);
      <span class="hljs-keyword">if</span> (idx &gt;= <span class="hljs-number">0</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>once we have located the function frame
we need to strip out everything before it (and its line)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">var</span> next_line = out.indexOf(<span class="hljs-string">'\n'</span>, idx + <span class="hljs-number">1</span>);
        out = out.substring(next_line + <span class="hljs-number">1</span>);
      }

      <span class="hljs-keyword">this</span>.stack = out;
    }
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>assert.AssertionError instanceof Error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">util.inherits(assert.AssertionError, <span class="hljs-built_in">Error</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">truncate</span>(<span class="hljs-params">s, n</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> s === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> s.length &lt; n ? s : s.slice(<span class="hljs-number">0</span>, n);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> s;
  }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inspect</span>(<span class="hljs-params">something</span>) </span>{
  <span class="hljs-keyword">if</span> (functionsHaveNames || !util.isFunction(something)) {
    <span class="hljs-keyword">return</span> util.inspect(something);
  }
  <span class="hljs-keyword">var</span> rawname = getName(something);
  <span class="hljs-keyword">var</span> name = rawname ? <span class="hljs-string">': '</span> + rawname : <span class="hljs-string">''</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">'[Function'</span> +  name + <span class="hljs-string">']'</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMessage</span>(<span class="hljs-params">self</span>) </span>{
  <span class="hljs-keyword">return</span> truncate(inspect(self.actual), <span class="hljs-number">128</span>) + <span class="hljs-string">' '</span> +
         self.operator + <span class="hljs-string">' '</span> +
         truncate(inspect(self.expected), <span class="hljs-number">128</span>);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>At present only the three keys mentioned above are used and
understood by the spec. Implementations or sub modules can pass
other keys to the AssertionError's constructor - they will be
ignored.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<ol start="3">
<li>All of the following functions must throw an AssertionError
when a corresponding condition is not met, with a message that
may be undefined if not provided.  All assertion methods provide
both the actual and expected values to the assertion error for
display purposes.</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fail</span>(<span class="hljs-params">actual, expected, message, operator, stackStartFunction</span>) </span>{
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> assert.AssertionError({
    <span class="hljs-attr">message</span>: message,
    <span class="hljs-attr">actual</span>: actual,
    <span class="hljs-attr">expected</span>: expected,
    <span class="hljs-attr">operator</span>: operator,
    <span class="hljs-attr">stackStartFunction</span>: stackStartFunction
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>EXTENSION! allows for well behaved errors defined elsewhere.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">assert.fail = fail;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<ol start="4">
<li>Pure assertion tests whether a value is truthy, as determined
by !!guard.
assert.ok(guard, message_opt);
This statement is equivalent to assert.equal(true, !!guard,
message_opt);. To test strictly for the value true, use
assert.strictEqual(true, guard, message_opt);.</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ok</span>(<span class="hljs-params">value, message</span>) </span>{
  <span class="hljs-keyword">if</span> (!value) fail(value, <span class="hljs-literal">true</span>, message, <span class="hljs-string">'=='</span>, assert.ok);
}
assert.ok = ok;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<ol start="5">
<li>The equality assertion tests shallow, coercive equality with
==.
assert.equal(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.equal = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">equal</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual != expected) fail(actual, expected, message, <span class="hljs-string">'=='</span>, assert.equal);
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<ol start="6">
<li>The non-equality assertion tests for whether two objects are not equal
with != assert.notEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.notEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual == expected) {
    fail(actual, expected, message, <span class="hljs-string">'!='</span>, assert.notEqual);
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<ol start="7">
<li>The equivalence assertion tests a deep equality relation.
assert.deepEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.deepEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (!_deepEqual(actual, expected, <span class="hljs-literal">false</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'deepEqual'</span>, assert.deepEqual);
  }
};

assert.deepStrictEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepStrictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (!_deepEqual(actual, expected, <span class="hljs-literal">true</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'deepStrictEqual'</span>, assert.deepStrictEqual);
  }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_deepEqual</span>(<span class="hljs-params">actual, expected, strict, memos</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>7.1. All identical values are equivalent, as determined by ===.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (actual === expected) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isBuffer(actual) &amp;&amp; isBuffer(expected)) {
    <span class="hljs-keyword">return</span> compare(actual, expected) === <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>7.2. If the expected value is a Date object, the actual value is
equivalent if it is also a Date object that refers to the same time.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (util.isDate(actual) &amp;&amp; util.isDate(expected)) {
    <span class="hljs-keyword">return</span> actual.getTime() === expected.getTime();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>7.3 If the expected value is a RegExp object, the actual value is
equivalent if it is also a RegExp object with the same source and
properties (<code>global</code>, <code>multiline</code>, <code>lastIndex</code>, <code>ignoreCase</code>).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (util.isRegExp(actual) &amp;&amp; util.isRegExp(expected)) {
    <span class="hljs-keyword">return</span> actual.source === expected.source &amp;&amp;
           actual.global === expected.global &amp;&amp;
           actual.multiline === expected.multiline &amp;&amp;
           actual.lastIndex === expected.lastIndex &amp;&amp;
           actual.ignoreCase === expected.ignoreCase;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>7.4. Other pairs that do not both pass typeof value == 'object',
equivalence is determined by ==.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((actual === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> actual !== <span class="hljs-string">'object'</span>) &amp;&amp;
             (expected === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> expected !== <span class="hljs-string">'object'</span>)) {
    <span class="hljs-keyword">return</span> strict ? actual === expected : actual == expected;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>If both values are instances of typed arrays, wrap their underlying
ArrayBuffers in a Buffer each to increase performance
This optimization requires the arrays to have the same type as checked by
Object.prototype.toString (aka pToString). Never perform binary
comparisons for Float*Arrays, though, since e.g. +0 === -0 but their
bit patterns are not identical.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isView(actual) &amp;&amp; isView(expected) &amp;&amp;
             pToString(actual) === pToString(expected) &amp;&amp;
             !(actual <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Float32Array</span> ||
               actual <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Float64Array</span>)) {
    <span class="hljs-keyword">return</span> compare(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(actual.buffer),
                   <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(expected.buffer)) === <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>7.5 For all other Object pairs, including Array objects, equivalence is
determined by having the same number of owned properties (as verified
with Object.prototype.hasOwnProperty.call), the same set of keys
(although not necessarily the same order), equivalent values for every
corresponding key, and an identical 'prototype' property. Note: this
accounts for both named and indexed properties on Arrays.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isBuffer(actual) !== isBuffer(expected)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  } <span class="hljs-keyword">else</span> {
    memos = memos || {<span class="hljs-attr">actual</span>: [], <span class="hljs-attr">expected</span>: []};

    <span class="hljs-keyword">var</span> actualIndex = memos.actual.indexOf(actual);
    <span class="hljs-keyword">if</span> (actualIndex !== <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">if</span> (actualIndex === memos.expected.indexOf(expected)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }

    memos.actual.push(actual);
    memos.expected.push(expected);

    <span class="hljs-keyword">return</span> objEquiv(actual, expected, strict, memos);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArguments</span>(<span class="hljs-params">object</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(object) == <span class="hljs-string">'[object Arguments]'</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objEquiv</span>(<span class="hljs-params">a, b, strict, actualVisitedObjects</span>) </span>{
  <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">null</span> || a === <span class="hljs-literal">undefined</span> || b === <span class="hljs-literal">null</span> || b === <span class="hljs-literal">undefined</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>if one is a primitive, the other must be same</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (util.isPrimitive(a) || util.isPrimitive(b))
    <span class="hljs-keyword">return</span> a === b;
  <span class="hljs-keyword">if</span> (strict &amp;&amp; <span class="hljs-built_in">Object</span>.getPrototypeOf(a) !== <span class="hljs-built_in">Object</span>.getPrototypeOf(b))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">var</span> aIsArgs = isArguments(a);
  <span class="hljs-keyword">var</span> bIsArgs = isArguments(b);
  <span class="hljs-keyword">if</span> ((aIsArgs &amp;&amp; !bIsArgs) || (!aIsArgs &amp;&amp; bIsArgs))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (aIsArgs) {
    a = pSlice.call(a);
    b = pSlice.call(b);
    <span class="hljs-keyword">return</span> _deepEqual(a, b, strict);
  }
  <span class="hljs-keyword">var</span> ka = objectKeys(a);
  <span class="hljs-keyword">var</span> kb = objectKeys(b);
  <span class="hljs-keyword">var</span> key, i;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>having the same number of owned properties (keys incorporates
hasOwnProperty)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (ka.length !== kb.length)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>the same set of keys (although not necessarily the same order),</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  ka.sort();
  kb.sort();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<pre><code class="cheap"></code></pre>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">for</span> (i = ka.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">if</span> (ka[i] !== kb[i])
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>equivalent values for every corresponding key, and</p>
<pre><code class="possibly"></code></pre>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">for</span> (i = ka.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    key = ka[i];
    <span class="hljs-keyword">if</span> (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<ol start="8">
<li>The non-equivalence assertion tests for any deep inequality.
assert.notDeepEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.notDeepEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notDeepEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (_deepEqual(actual, expected, <span class="hljs-literal">false</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'notDeepEqual'</span>, assert.notDeepEqual);
  }
};

assert.notDeepStrictEqual = notDeepStrictEqual;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notDeepStrictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (_deepEqual(actual, expected, <span class="hljs-literal">true</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'notDeepStrictEqual'</span>, notDeepStrictEqual);
  }
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<ol start="9">
<li>The strict equality assertion tests strict equality, as determined by ===.
assert.strictEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.strictEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">strictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual !== expected) {
    fail(actual, expected, message, <span class="hljs-string">'==='</span>, assert.strictEqual);
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<ol start="10">
<li>The strict non-equality assertion tests for strict inequality, as
determined by !==.  assert.notStrictEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.notStrictEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notStrictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual === expected) {
    fail(actual, expected, message, <span class="hljs-string">'!=='</span>, assert.notStrictEqual);
  }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expectedException</span>(<span class="hljs-params">actual, expected</span>) </span>{
  <span class="hljs-keyword">if</span> (!actual || !expected) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(expected) == <span class="hljs-string">'[object RegExp]'</span>) {
    <span class="hljs-keyword">return</span> expected.test(actual);
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (actual <span class="hljs-keyword">instanceof</span> expected) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  } <span class="hljs-keyword">catch</span> (e) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>Ignore.  The instanceof check doesn't work for arrow functions.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  }

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.isPrototypeOf(expected)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">return</span> expected.call({}, actual) === <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_tryBlock</span>(<span class="hljs-params">block</span>) </span>{
  <span class="hljs-keyword">var</span> error;
  <span class="hljs-keyword">try</span> {
    block();
  } <span class="hljs-keyword">catch</span> (e) {
    error = e;
  }
  <span class="hljs-keyword">return</span> error;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_throws</span>(<span class="hljs-params">shouldThrow, block, expected, message</span>) </span>{
  <span class="hljs-keyword">var</span> actual;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> block !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"block" argument must be a function'</span>);
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> expected === <span class="hljs-string">'string'</span>) {
    message = expected;
    expected = <span class="hljs-literal">null</span>;
  }

  actual = _tryBlock(block);

  message = (expected &amp;&amp; expected.name ? <span class="hljs-string">' ('</span> + expected.name + <span class="hljs-string">').'</span> : <span class="hljs-string">'.'</span>) +
            (message ? <span class="hljs-string">' '</span> + message : <span class="hljs-string">'.'</span>);

  <span class="hljs-keyword">if</span> (shouldThrow &amp;&amp; !actual) {
    fail(actual, expected, <span class="hljs-string">'Missing expected exception'</span> + message);
  }

  <span class="hljs-keyword">var</span> userProvidedMessage = <span class="hljs-keyword">typeof</span> message === <span class="hljs-string">'string'</span>;
  <span class="hljs-keyword">var</span> isUnwantedException = !shouldThrow &amp;&amp; util.isError(actual);
  <span class="hljs-keyword">var</span> isUnexpectedException = !shouldThrow &amp;&amp; actual &amp;&amp; !expected;

  <span class="hljs-keyword">if</span> ((isUnwantedException &amp;&amp;
      userProvidedMessage &amp;&amp;
      expectedException(actual, expected)) ||
      isUnexpectedException) {
    fail(actual, expected, <span class="hljs-string">'Got unwanted exception'</span> + message);
  }

  <span class="hljs-keyword">if</span> ((shouldThrow &amp;&amp; actual &amp;&amp; expected &amp;&amp;
      !expectedException(actual, expected)) || (!shouldThrow &amp;&amp; actual)) {
    <span class="hljs-keyword">throw</span> actual;
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<ol start="11">
<li>Expected to throw an error:
assert.throws(block, Error_opt, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.throws = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block, <span class="hljs-regexp">/*optional*/</span>error, <span class="hljs-regexp">/*optional*/m</span>essage</span>) </span>{
  _throws(<span class="hljs-literal">true</span>, block, error, message);
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>EXTENSION! This is annoying to write outside this module.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">assert.doesNotThrow = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block, <span class="hljs-regexp">/*optional*/</span>error, <span class="hljs-regexp">/*optional*/m</span>essage</span>) </span>{
  _throws(<span class="hljs-literal">false</span>, block, error, message);
};

assert.ifError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{ <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err; };

<span class="hljs-keyword">var</span> objectKeys = <span class="hljs-built_in">Object</span>.keys || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">var</span> keys = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
    <span class="hljs-keyword">if</span> (hasOwn.call(obj, key)) keys.push(key);
  }
  <span class="hljs-keyword">return</span> keys;
};

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
